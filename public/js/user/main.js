(self.webpackChunkvue_webapp=self.webpackChunkvue_webapp||[]).push([[179],{4671:(t,e,s)=>{"use strict";var i=s(144);i.Z.directive("click-outside",{bind:function(t,e,s){t.clickOutsideEvent=function(i){t==i.target||t.contains(i.target)||s.context[e.expression](i)},document.body.addEventListener("click",t.clickOutsideEvent)},unbind:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}});var n=s(8947),a=s(1436),r=s(7810);const o=new i.Z,l={name:"Toast",props:{transitionName:{type:String},onClose:{type:Function}},data:()=>({tostinis:[]}),methods:{_add(t){-1===this.tostinis.findIndex((e=>e.id===t.id))&&(this.tostinis.push(t),this._setTimer(t))},_remove(t){const e=this.tostinis.findIndex((e=>e.id===t));this.tostinis.splice(e,1),this.onClose(t)},_setTimer(t){setTimeout((t=>{this._remove(t)}),t.duration,t.id)},bake(t){const e=Object.assign({id:Date.now()},t);this._add(e)}},mounted(){o.$on("toast-jump",this.bake)},render(t){const{default:e}=this.$scopedSlots;return t("transition-group",{class:"tostini-plate",props:{name:this.transitionName,tag:"div"}},this.tostinis.map((({id:s,type:i,message:n,html:a})=>t("div",{class:"tostini",key:s,attrs:{"data-type":i,role:"alert"},domProps:!e&&{[a?"innerHTML":"innerText"]:n}},e&&e({type:i,message:n,html:a,close:()=>this._remove(s)})))))}},c=function(t){"string"==typeof t&&(t={message:t}),null==t.duration&&(t.duration=Math.max(2e3,1e3*t.message.length/12.84+400)),null==t.type&&(t.type="default"),t.html=!!t.html,o.$emit("toast-jump",t)},u={install(t){t.component(l.name,l),t.prototype.$toast=c}};var d=s(8345),h=s(629),p=s(8066),m=s(178),g=s(6245),v=s(9669),f=s.n(v),C=s(359),_=s(3462),y=s(529);const b={loadings:{},errors:{}},k="setLoading",x="setLoaded",S="setError",I="setDismissError",P="app",T={namespaced:!0,state:()=>b,getters:{isLoading:t=>Object.keys(t.loadings).length>0,errors:t=>t.errors},actions:{},mutations:{[k](t,e){t.loadings=(0,_.Z)(e,!0,(0,y.Z)(t.loadings))},[x](t,e){t.loadings=(0,_.Z)(e,!1,(0,y.Z)(t.loadings)),t.loadings=(0,C.Z)(e,t.loadings),t.errors=(0,C.Z)(e,t.errors)},[I](t,e){t.errors=(0,C.Z)(e,t.errors)},[S](t,{name:e,errMsg:s}){t.loadings=(0,_.Z)(e,!1,(0,y.Z)(t.loadings)),t.loadings=(0,C.Z)(e,t.loadings),t.errors=(0,_.Z)(e,s,(0,y.Z)(t.errors))}}};let w={id:null,action:null,capLoading:!1,capError:!1};function L(t=w,e={}){return e.context={...w,...t},e}class ${constructor(){return $.instance||(this.store=null,this.client=f().create({baseURL:"https://mylife-deli-api.phattiencorp.vn"}),$.instance=this),$.instance}parseCtx(t){return t.context?{ctx:t.context}:{ctx:w}}withStore(t){this.store=t,this.client.interceptors.request.use((t=>{const{ctx:e}=this.parseCtx(t);return t.context=e,e.capLoading&&this.store.commit("app/setLoading",`${e.action}/${e.id}`),t}),(t=>{const e=t,{ctx:s}=this.parseCtx(e.config);return s.capError&&this.store.commit("app/setError",{name:`${s.action}/${s.id}`,errMsg:e.message}),Promise.reject(t)})),this.client.interceptors.response.use((t=>{const{ctx:e}=this.parseCtx(t.config);return e.capLoading&&this.store.commit("app/setLoaded",`${e.action}/${e.id}`),t}),(t=>{const e=t,{status:s}=e.response;401==s&&(this.store.commit(`${Y}/${V.CLEAR_ALL_DATA}`),window.location.reload());const{ctx:i}=this.parseCtx(e.config),{data:n}=e.response;return i.capError&&this.store.commit("app/setError",{name:`${i.action}/${i.id}`,errMsg:n.message}),Promise.reject(t)}))}setToken(t){this.client.defaults.headers.common.Authorization=`Bearer ${t}`}setOldToken(t){this.client.defaults.headers.common["Authorization-Old"]=`Bearer ${t}`}}$.instance=void 0;const E=new $,Z="token",D="oldToken",O="customer",q="cart",N="delivery",B=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,F=(t,e)=>t&&parseInt(t,10)&&e&&parseInt(e,10)?Math.round(t/Math.pow(10,parseInt(e,10)))*Math.pow(10,e):0,A=t=>t?F(F(t,1),2):0,M={_id:null,fullName:null,email:null,countryCode:null,phone:null,role:null,status:null},G={token:null,oldToken:null,accountType:null,user:M,phoneVerify:{phoneExisted:null,countryCode:null,phone:null}},V={SAVE_TOKEN:"saveToken",SET_TOKEN:"setToken",SET_USER:"setUser",SET_PHONE_VERIFY:"setPhoneVerify",CLEAR_ALL_DATA:"clearAllData"},R="doLoadInfo",j="doPublicLogin",H="requestOTP",z="verifyOTP",U="register",W="quickLogin",X="doLogOut",K="doUpdateProfile",Y="account",Q={namespaced:!0,state:()=>G,getters:{isLogged:t=>null!==t.token&&(0,p.Z)("employee",["accountType"],t)===O},actions:{async[R]({commit:t,dispatch:e,getters:s}){let i=localStorage.getItem(Z),n=localStorage.getItem(D);if((null==i||(()=>{const t=localStorage.getItem(Z);return null==t||((0,g.Z)(t).exp-(new Date).getTime()/1e3)/86400<=1})())&&(s.isLogged?e(X):i=await e(j)),null!==i){if(t(V.SET_TOKEN,{token:i,oldToken:n}),!s.isLogged)return;return E.client.get("/v2/auth/profile",L({action:R,id:"none",capError:!0,capLoading:!0})).then((({data:e})=>{let s=(0,p.Z)(null,["data","item"],e);return t(V.SET_USER,s),s}),(t=>(console.debug("Get user info err:",t.response),null)))}return Promise.reject("Can not login")},[j]:({commit:t})=>E.client.post("/v1/auth/login-employee",{email:"bao.tran@phattiencorp.vn",password:"123456"},L({action:j,id:"none",capError:!0,capLoading:!0})).then((e=>{let s=e.data,i=s.data.token;return t(V.SAVE_TOKEN,{token:i}),t(V.SET_TOKEN,{token:i,oldToken:null}),t(V.SET_USER,(0,m.Z)(Object.keys(M),s.data.item)),i}),(t=>(console.debug("Login public err:",t.response),Promise.reject(t)))),[H]:({commit:t},{countryCode:e,phone:s})=>E.client.post("/v2/auth/check",{countryCode:e||"+84",phone:s},L({action:H,id:"none",capError:!0,capLoading:!0})).then((({data:i})=>(console.log("==>Use this OTP for Developing",i.data),t(V.SET_PHONE_VERIFY,{phoneExisted:(0,p.Z)(!1,["data","phoneExisted"],i),countryCode:e,phone:s}),i.data.phoneExisted)),(t=>(console.debug("Check phone number fail"),Promise.reject(t)))),[z]:({commit:t,dispatch:e},{countryCode:s,phone:i,smsCode:n})=>E.client.post("/v2/auth/verify",{countryCode:s||"+84",phone:i,smsCode:n},L({action:z,id:"none",capError:!0,capLoading:!0})).then((async({data:s})=>{let i=(0,p.Z)(null,["data","result","token"],s),n=(0,p.Z)(null,["data","result","oldToken"],s);return t(V.SAVE_TOKEN,{token:i,oldToken:n}),t(V.SET_TOKEN,{token:i,oldToken:n}),await e(R),!0}),(t=>{let e=t.response;return console.debug("Verify OTP Fail==>",e.data),Promise.reject(t)})),[U]:({commit:t},e)=>E.client.post("/v2/auth/register",e,L({action:U,id:"none",capError:!0,capLoading:!0})).then((({data:s})=>"REGISTER_SUCCESS"==s.message&&(t(V.SET_PHONE_VERIFY,{phoneExisted:!0,countryCode:e.countryCode,phone:e.phone}),!0)),(t=>(console.debug("Register Fail: ",t.response),Promise.reject(t)))),[W]:({commit:t,dispatch:e},{countryCode:s,phone:i})=>E.client.post("/v2/auth/login",{countryCode:s||"+84",phone:i},L({action:W,id:"none",capError:!0,capLoading:!0})).then((async({data:s})=>{let i=(0,p.Z)(null,["data","result","token"],s),n=(0,p.Z)(null,["data","result","oldToken"],s);return t(V.SAVE_TOKEN,{token:i,oldToken:n}),t(V.SET_TOKEN,{token:i,oldToken:n}),await e(R),Promise.resolve(!0)}),(t=>(console.debug("Quick Login Fail: ",t.response),!1))),[K]:({dispatch:t},e)=>E.client.put("/v2/auth/profile",e,L({action:K,id:"none",capError:!0,capLoading:!0})).then((()=>t(R)),(t=>Promise.reject(t))),[X]({commit:t}){t(V.CLEAR_ALL_DATA),window.location.replace("/")}},mutations:{[V.SAVE_TOKEN](t,{token:e,oldToken:s}){localStorage.setItem(Z,e),localStorage.setItem(D,s)},[V.SET_TOKEN](t,{token:e,oldToken:s}){t.token=e,null!=s&&(t.oldToken=s,E.setOldToken(s));let i=(0,g.Z)(e);t.accountType=i.accountType,E.setToken(e)},[V.SET_USER](t,e){t.user=e},[V.SET_PHONE_VERIFY](t,{phoneExisted:e,countryCode:s,phone:i}){t.phoneVerify.phoneExisted=e,t.phoneVerify.countryCode=s,t.phoneVerify.phone=i},[V.CLEAR_ALL_DATA](t){localStorage.removeItem(q),localStorage.removeItem(Z),localStorage.removeItem(D),t.user=M,t.accountType=null}}},J={...(0,h.rn)(Y,{token:"token",user:"user",phoneVerify:"phoneVerify"}),...(0,h.Se)(Y,{accountIsLogged:"isLogged"})},tt=((0,h.OI)(Y,{setAccountToken:V.SET_TOKEN}),{...(0,h.nv)(Y,{loadInfo:R,doPublicLogin:j,requestOTP:H,verifyOTP:z,register:U,quickLogin:W,doLogout:X,doUpdateProfile:K})});var et=s(489),st=s(9278),it=s(1920),nt=s(6946),at=s(824),rt=s(2338);const ot={subhead:"",type:N,fullName:"",countryCode:"+84",phone:"",email:null,address:"",targetModel:"Brand",targetId:null,customerId:null,lines:[],_id:null},lt=["ingredients","note","productId","price","discount"],ct={transactions:[],transaction:null,cart:ot,cartInvalid:null},ut="setTransactions",dt="setTransaction",ht="setCart",pt="setLineCount",mt="setVoucher",gt="removeLine",vt="actFetchTransaction",ft="actListTransactions",Ct="actListTransactions2",_t="actGetCurrentTransaction",yt="actGetTransactionByID",bt="actCreateTransaction",kt="actUpdateTransaction",xt="actInitCart",St="actNormalizeCart",It="actAddLine",Pt="actRemoveLine",Tt="actSetLineCount",wt="actClearCart",Lt="actSubmitOrder",$t="actUseVoucher",Et="cart",Zt=t=>{let e=[],s={...t.cart};return s.lines.forEach((t=>{let s=(0,p.Z)([],["ingredients"],t).map((t=>t.recipes)),i=t.quantity,n=(0,m.Z)(["productId","price","discount","note"],t);n.selections=(0,et.Z)(s),e=e.concat(Array.from(Array(i),(()=>n)))})),s.productLines=e,delete s.lines,delete s._id,s},Dt={namespaced:!0,state:()=>ct,getters:{listTransactions:t=>t.transactions,transaction:t=>t.transaction,cart:t=>t.cart,submitCart:t=>Zt(t),productsInCart:({cart:t},e,{products:s})=>t.lines.map((t=>{const e=s.allProducts.find((e=>e._id===t.productId));if(e){const s=(0,p.Z)([],["ingredients"],t).map((t=>{const s=(e?e.ingredients:[]).find((e=>t.code===e.code)),i=s.recipes.filter((e=>t.recipes.includes(e.code)));return{...s,selectedRecipes:i}}));return{...e,quantity:t.quantity,selectedIngredients:s,price:t.price,discount:t.discount,priceAfterDiscount:t.priceAfterDiscount,note:t.note}}return!1})).filter((t=>t))},actions:{[vt](t,e={page:1,limit:0,status:null}){let s=(0,p.Z)(null,["account","user","_id"],this.state),i="/v1/transactions",n=["type=delivery","sort.order=1"];return s&&n.push(`customerId=${s}`),e.status&&n.push(`status=${e.status}`),e.page&&n.push(`page=${e.page}`),e.limit&&n.push(`ppp=${e.limit}`),n.length>0&&(i=`${i}?${n.join("&")}`),E.client.get(i,L({id:"none",action:vt,capLoading:!0,capError:!0}))},[ft]({commit:t,dispatch:e},s={page:1,limit:0,status:null}){e(vt,s).then((({data:e})=>{const s=(0,p.Z)([],["data","items"],e);return t(ut,s),s}),(t=>(console.debug("List Transaction err",t.response),null)))},[Ct]({commit:t},e={page:1,limit:0,status:null}){let s=(0,p.Z)(null,["account","user","_id"],this.state),i="/v1/transactions",n=["type=delivery","sort.order=1"];return s&&n.push(`customerId=${s}`),e.status&&n.push(`status=${e.status}`),e.page&&n.push(`page=${e.page}`),e.limit&&n.push(`ppp=${e.limit}`),n.length>0&&(i=`${i}?${n.join("&")}`),E.client.get(i,L({id:`${e.page}`,action:Ct,capError:!0,capLoading:!0})).then((e=>{let s=(0,p.Z)([],["data","items"],e.data);for(let t=0;t<s.length;t++)s[t].groupProductId=s[t].productLines.reduce(((t,e)=>(t[e.productId]=[...t[e.productId]||[],e],t)),{});return t(ut,s),s}),(t=>(console.debug("List transaction err",t.response),null)))},[_t]:({commit:t,dispatch:e})=>e(vt,{status:"drafting"}).then((({data:e})=>{let s=(0,p.Z)([],["data","items"],e);return 1==s.length?(t(dt,s[0]),s[0]):(t(dt,null),null)}),(t=>(console.debug("Get Current Transaction err",t.response),null))),[bt]({commit:t,state:e,getters:s}){if(0==e.cart.lines.length)return null;let i={...e.cart};return i.customerId=(0,p.Z)(null,["account","user","_id"],this.state),t(ht,i),E.client.post("/v1/transactions",s.submitCart,L({id:"none",action:bt,capLoading:!0,capError:!0})).then((({data:e})=>{let s=(0,p.Z)([],["data","item"],e);if(s)return t(ht,s),s}),(t=>(console.debug("Create Transaction err",t.response),null)))},[yt]:({commit:t},e)=>E.client.get(`/v1/transactions/${e}`,L({id:e,action:yt,capLoading:!0,capError:!0})).then((e=>{let s=(0,p.Z)(null,["data","item"],e);return t(dt,s),(0,p.Z)(null,["data","item"],s)}),(t=>(console.debug("Get brand err:",t.response),null))),[kt]({commit:t,state:e}){let s=(0,p.Z)(null,["cart","_id"],e);return E.client.put(`/v1/transactions/${s}`,Zt(e),L({id:s,action:kt,capLoading:!1,capError:!0})).then((({data:e})=>{let s=(0,p.Z)(null,["data","item"],e);t(ht,s)}),(t=>(console.debug("Update transaction err:",t.response),null)))},[xt]({commit:t,dispatch:e,state:s}){let i=localStorage.getItem(q),n=ot;return i&&(n=JSON.parse(i)),(0,p.Z)(null,["account","accountType"],this.state)==O?e(_t).then((()=>(s.transaction?n.lines.length>0?(n._id=s.transaction._id,n.customerId=s.transaction.customerId,t(ht,n),e(kt)):(n=s.transaction,t(ht,n)):n.lines.length>0&&e(bt),n))):(t(ht,n),n)},[St]({commit:t,state:e}){t(ht,e.cart)},[It]({commit:t,dispatch:e,state:s},i){if(0==s.cart.lines.length)s.cart.targetId=i.targetId,s.cart.lines=[i];else if(s.cart.targetId)if(s.cart.targetId==i.targetId){let t=!1;s.cart.lines.every(((e,n)=>(t=(0,st.Z)((0,m.Z)(lt,e),(0,m.Z)(lt,i)),!t||(s.cart.lines[n].quantity+=i.quantity,!1)))),t||s.cart.lines.push(i)}else s.cart.targetId=i.targetId,s.cart.lines=[i];return(0,p.Z)(null,["account","accountType"],this.state)==O?(0,p.Z)(null,["cart","_id"],s)?e(kt):e(bt):t(ht,{...s.cart}),s.cart},[Pt]({commit:t,dispatch:e,state:s},i){t(gt,i),(0,p.Z)(null,["account","accountType"],this.state)==O&&(0,p.Z)(null,["cart","_id"],s)?e(kt):t(ht,{...s.cart})},[Tt]({commit:t,dispatch:e,state:s},{lineIdx:i,val:n}){t(pt,{lineIdx:i,val:n}),(0,p.Z)(null,["account","accountType"],this.state)==O&&(0,p.Z)(null,["cart","_id"],s)?e(kt):t(ht,{...s.cart})},[Lt]({commit:t,dispatch:e,state:s},i){let n={...s.cart},a={...s.cart,...i};return a.customerId=(0,p.Z)(null,["account","user","_id"],this.state),t(ht,a),a._id?E.client.put(`/v1/transactions/${a._id}/submit`,Zt(s),L({id:"none",action:Lt,capLoading:!0,capError:!0})).then((({data:t})=>(e(wt),(0,p.Z)(null,["data","item"],t))),(e=>(console.debug("Submit order fail:",e.response),t(ht,n),Promise.reject(e)))):null},[wt]({commit:t}){t(ht,ot)},[$t]({commit:t,dispatch:e,rootState:{account:s}},i){E.client.post("/v2/auth/voucher",{voucherCode:i},L({id:i,action:$t,capError:!0,capLoading:!0},{headers:{"Authorization-Old":`Bearer ${s.oldToken}`}})).then((s=>{t(mt,s.data.data.item),e(kt)}))}},mutations:{[ut](t,e){t.transactions=e},[dt](t,e){t.transaction=e},[pt](t,{lineIdx:e,val:s}){t.cart.lines=t.cart.lines.map(((t,i)=>e===i?{...t,quantity:s}:t)),localStorage.setItem(q,JSON.stringify(t.cart))},[mt](t,{voucherCode:e,voucherDiscount:s}){t.cart={...t.cart,voucherCode:e,voucherDiscount:s}},[gt](t,e){t.cart.lines=t.cart.lines.filter(((t,s)=>s!==e)),localStorage.setItem(q,JSON.stringify(t.cart))},[ht](t,e){if(e.productLines){let t=[...e.productLines];t.forEach((t=>{let e=(0,it.Z)((0,nt.Z)("_id",t.productId))((0,p.Z)([],["products","allProducts"],this.state));if(e){let s=(0,p.Z)([],["ingredients"],e);t.ingredients=[],s.forEach((e=>{const s=e.recipes.map((t=>t.code)),i=(0,at.Z)(t.selections,s);t.ingredients.push({code:e.code,recipes:i})}))}t={...t}}));let s=[];t.map((t=>t.checked=!1)),t.forEach((e=>{e.checked||(e.checked=!0,s.push({productId:e.productId,note:e.note,price:e.price,discount:e.discount,priceAfterDiscount:e.priceAfterDiscount,ingredients:e.ingredients,quantity:1})),(0,rt.Z)(((t,e)=>((0,st.Z)((0,m.Z)(lt,t),(0,m.Z)(lt,e))&&!e.checked&&(e.checked=!0,s[s.length-1].quantity+=1),t)),e,t)})),e.lines=s}t.cart={...e},localStorage.setItem(q,JSON.stringify(e))}}},Ot={...(0,h.rn)(Et,{}),...(0,h.Se)(Et,{cart:"cart",productsInCart:"productsInCart",listTransactions:"listTransactions"})},qt={...(0,h.OI)(Et,{})},Nt={...(0,h.nv)(Et,{actListTransactions:ft,actListTransactions2:Ct,actGetTransactionByID:yt,actInitCart:xt,actNormalizeCart:St,actClearCart:wt,actAddNewProduct:It,actRemoveLine:Pt,actSetLineCount:Tt,actUseVoucher:$t,actSubmitOrder:Lt})},Bt={name:"LAccount",mounted(){this.$route.query.phone&&this.quickLogin({countryCode:"+84",phone:this.$route.query.phone.toString()}).then((()=>{this.actInitCart().then((()=>{fi.push({name:"p-home"})}))}))},methods:{...tt,...Nt}};var Ft=s(1900);const At=(0,Ft.Z)(Bt,(function(){var t=this.$createElement;return(this._self._c||t)("router-view")}),[],!1,null,null,null).exports,Mt={brands:[],brand:null},Gt="setBrands",Vt="setBrand",Rt="actListBrands",jt="actGetBrandByID",Ht="actClearBrand",zt="brands",Ut={namespaced:!0,state:()=>Mt,getters:{listBrand:t=>t.brands,brand:t=>t.brand,listRestaurantAndCoffee:t=>t.brands.filter((t=>"restaurant"===t.type||"coffee"===t.type)),listMarket:t=>t.brands.filter((t=>"market"===t.type)),listGroup1:t=>t.brands.filter((t=>"YS"===t.code)),listGroup2:t=>t.brands.filter((t=>"market"!==t.type&&"YS"!==t.code))},actions:{[Rt]({commit:t},e={type:null,page:1,limit:0}){let s="/v1/brands",i=["companyId=5f992a2e5c4b03053ecf3ed5","populate.stores","status=activated","sort.order=1","platforms=website"];return e.type&&i.push(`type=${e.type}`),e.page&&i.push(`page=${e.page}`),e.limit&&i.push(`ppp=${e.limit}`),i.length>0&&(s=`${s}?${i.join("&")}`),E.client.get(s,L({id:`${e.page}`,action:Rt,capError:!0,capLoading:!0})).then((e=>{let s=e.data;return t(Gt,(0,p.Z)([],["data","items"],s)),(0,p.Z)([],["data","items"],s)}),(t=>(console.debug("List brand err",t.response),Promise.reject(t))))},[jt]:({commit:t},e)=>E.client.get(`/v1/brands/${e}?populate.stores`,L({id:e,action:jt,capError:!0,capLoading:!0})).then((e=>{let s=e.data;return t(Vt,(0,p.Z)(null,["data","item"],s)),(0,p.Z)(null,["item"],s)}),(t=>(console.debug("Get brand by ID err:",t.response),null))),[Ht]({commit:t}){t(Vt,null)}},mutations:{[Gt](t,e){t.brands=e},[Vt](t,e){t.brand=e}}},Wt={...(0,h.rn)(zt,{}),...(0,h.Se)(zt,{listBrands:"listBrand",brand:"brand",listRestaurantAndCoffee:"listRestaurantAndCoffee",listMarket:"listMarket",listGroup1:"listGroup1",listGroup2:"listGroup2"})},Xt=((0,h.OI)(zt,{}),{...(0,h.nv)(zt,{actListBrand:Rt,actGetBrandByID:jt,actClearBrand:Ht})}),Kt={SQUARE:"square",NORMAL:"normal"},Yt={props:{shape:{type:String,default:Kt.NORMAL}},data:()=>({shapes:Kt})},Qt=(0,Ft.Z)(Yt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["box",{"is-squared":t.shape===t.shapes.SQUARE}]},[s("div",{staticClass:"box-content"},[t._t("default")],2)])}),[],!1,null,"6374b43e",null).exports,Jt={components:{Box:Qt},props:{img:{type:String,required:!0},imgNeg:{type:String,default:null},bgColor:{type:String,default:null},imgContext:{type:String,default:null}},mounted(){},methods:{}},te=(0,Ft.Z)(Jt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Box",{staticClass:"brand",style:{"background-color":t.bgColor},attrs:{shape:"square"}},[t.imgContext?s("img",{staticClass:"image-context z-0",attrs:{src:t.imgContext,alt:"brand-img",srcset:""}}):t._e(),t._v(" "),s("img",{staticClass:"image z-1",attrs:{src:t.img,alt:"brand-img",srcset:""}}),t._v(" "),s("img",{staticClass:"image-neg z-1",attrs:{src:t.imgNeg,alt:"brand-img",srcset:""}})])}),[],!1,null,"22bb6416",null).exports,ee={NORMAL:"normal",ZERO:"zero"},se={props:{size:{type:String,default:ee.NORMAL}},data:()=>({sizes:ee})},ie=(0,Ft.Z)(se,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:["container",{"is-zero":t.size==t.sizes.ZERO}]},[t._t("default")],2)}),[],!1,null,"32523081",null).exports,ne=(0,Ft.Z)({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"section"},[t._t("default")],2)}),[],!1,null,"1d375fcb",null).exports,ae={props:{data:{default:()=>[],type:Array},time:{default:5e3,type:Number},speed:{default:600,type:Number},spot:{default:!0,type:Boolean},type:{default:"ease",type:String},clockwise:{default:!0,type:Boolean}},data:()=>({cur:0,slideX:0,transition:0,touch:{startX:0,startY:0,ifN:!1,direction:!1,timer:null,duration:0,scrollDirection:null}}),computed:{prevItem(){return this.data[this.cur-1]||this.data[this.data.length-1]},nextItem(){return this.data[this.cur+1]||this.data[0]}},mounted(){this.setTimer()},beforeDestroy(){clearInterval(this.touch.timer)},methods:{getGap:(t,e=0)=>parseInt((t-e).toString().replace("-","")),touchStart(t){this.touch.startX=t.touches[0].clientX,this.touch.startY=t.touches[0].clientY,this.touch.ifN=!0,this.touch.duration=(new Date).getTime(),window.clearInterval(this.touch.timer),this.transition=0},touchMove(t){this.touch.ifN?(this.getGap(t.touches[0].clientX,this.touch.startX)>=this.getGap(t.touches[0].clientY,this.touch.startY)?(this.touch.direction=!0,t.currentTarget.style.transition=""):this.touch.direction=!1,this.touch.ifN=!1):this.touch.direction&&(t.preventDefault(),this.slideX=t.touches[0].clientX-this.touch.startX)},touchEnd(){this.setTimer(),this.touch.direction&&((new Date).getTime()-this.touch.duration>300&&this.getGap(this.slideX)<this.$refs.contentRef.offsetWidth/3?(this.touch.scrollDirection=null,this.transition=.8*this.speed,this.slideX=0):0!==this.slideX&&(this.slideX>0?this.prev():this.next()))},prev(){this.touch.scrollDirection="prev",this.transition=this.speed,this.slideX=this.$refs.contentRef.offsetWidth},next(){this.touch.scrollDirection="next",this.transition=this.speed,this.slideX=-this.$refs.contentRef.offsetWidth},transitionEnd(){let t=0;null===this.touch.scrollDirection?t=this.cur:"prev"===this.touch.scrollDirection?(t=0===this.cur?this.data.length-1:this.cur-1,this.$emit("prev",t)):(this.cur!==this.data.length-1&&(t=this.cur+1),this.$emit("next",t)),this.cur!==t&&this.$emit("change",t),this.transition=0,this.slideX=0,this.cur=t},setTimer(){this.time&&(this.touch.timer=setInterval(this.clockwise?this.next:this.prev,this.time))}}},re=(0,Ft.Z)(ae,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"contentRef",staticClass:"slider"},[s("div",{staticClass:"slider-btn-prev",on:{click:t.prev}},[s("FaIcon",{attrs:{icon:"chevron-left"}})],1),t._v(" "),s("div",{staticClass:"slider-btn-next",on:{click:t.next}},[s("FaIcon",{attrs:{icon:"chevron-right"}})],1),t._v(" "),s("div",{staticClass:"content",style:{transform:"translate3d("+t.slideX+"px, 0px, 0px)",transition:"transform "+t.transition/1e3+"s "+t.type},on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd,transitionend:t.transitionEnd}},[s("div",[s("img",{attrs:{src:t.prevItem}})]),t._v(" "),s("div",[s("img",{attrs:{src:t.data[t.cur]},on:{click:function(e){return t.$emit("click",t.cur)}}})]),t._v(" "),s("div",[s("img",{attrs:{src:t.nextItem}})])]),t._v(" "),t.spot?s("div",{staticClass:"spot"},t._l(t.data.length,(function(e,i){return s("div",{key:i,class:{cur:i===t.cur}})})),0):t._e()])}),[],!1,null,"271d378a",null).exports,oe={name:"PHome",components:{Container:ie,Section:ne,Brand:te,Slider:re},data:()=>({}),computed:{...J,...Wt},methods:{gotoBrand(t){if(this.isOpen=!1,"market"===t.type)return window.open(t.link,"_blank");fi.push({name:"p-dishes-collection",params:{brandSlug:t.slug}}).catch((()=>{}))}}},le=(0,Ft.Z)(oe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Section",{staticClass:"mt-0"},[s("Slider",{attrs:{data:["https://s3.phattiencorp.vn:7481/mylife/upload/delivery/2021/06/19/yen_banner_1624067424781.png","https://s3.phattiencorp.vn:7481/mylife/upload/delivery/2021/06/19/shamoji_banner_1624067424738.png","https://s3.phattiencorp.vn:7481/mylife/upload/delivery/2021/06/19/mlc_banner_1624067424618.png","https://s3.phattiencorp.vn:7481/mylife/upload/delivery/2021/06/19/kohi_banner_1624067424592.png"]}})],1),t._v(" "),s("Container",[s("Section",[s("div",{staticClass:"text-center"},[s("h1",{staticClass:"text-title-2 text-white"},[t._v("Chọn thương hiệu")])]),t._v(" "),s("div",{staticClass:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-4"},t._l(t.listMarket.concat(t.listGroup1),(function(e,i){return s("a",{key:i,on:{click:function(){return t.gotoBrand(e)}}},[s("Brand",{attrs:{img:e.image,"img-context":e.context,"img-neg":e.negativeImage,"bg-color":e.primaryColor}})],1)})),0),t._v(" "),s("div",{staticClass:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-4"},t._l(t.listGroup2,(function(e,i){return s("a",{key:i,on:{click:function(){return t.gotoBrand(e)}}},[s("Brand",{attrs:{img:e.image,"img-context":e.context,"img-neg":e.negativeImage,"bg-color":e.primaryColor}})],1)})),0)])],1)],1)}),[],!1,null,"5dd1cf81",null).exports,ce={...(0,h.rn)(P,{}),...(0,h.Se)(P,{appIsLoading:"isLoading",errors:"errors"})},ue={...(0,h.OI)(P,{setDismissError:I})},de={categories:[]},he="setCategories",pe="actListCategories",me="actClearCategories",ge="categories",ve={namespaced:!0,state:()=>de,getters:{listCategories:t=>t.categories},actions:{[pe]({commit:t},e={type:null,page:1,limit:0,storeIds:[],brandId:null}){let s="/v1/categories",i=["status=activated","sort.order=1","services=delivery","platforms=website"];return e.type&&i.push(`type=${e.type}`),e.page&&i.push(`page=${e.page}`),null==e.limit&&void 0===e.limit||i.push(`ppp=${e.limit}`),null!=e.brandId&&i.push(`brandIds=${e.brandId}`),e.storeIds&&Array.isArray(e.storeIds)&&e.storeIds.forEach(((t,e)=>{i.push(`storeId[${e}]=${t}`)})),i.length>0&&(s=`${s}?${i.join("&")}`),E.client.get(s,L({id:"none",action:pe,capError:!0,capLoading:!0})).then((e=>{let s=e.data;return t(he,(0,p.Z)([],["data","items"],s)),(0,p.Z)([],["data","items"],s)}),(e=>(t(he,[]),console.debug("List Category err:",e.response),null)))},[me]({commit:t}){t(he,[])}},mutations:{[he](t,e){t.categories=e}}},fe={...(0,h.rn)(ge,{}),...(0,h.Se)(ge,{listCategories:"listCategories"})},Ce=((0,h.OI)(ge,{}),{...(0,h.nv)(ge,{actListCategory:pe,actClearCategory:me})});var _e=s(3069);const ye={totalProducts:0,allProducts:[],products:[],prices:{},product:null},be="setProducts",ke="setAllProducts",xe="setProduct",Se="setPrices",Ie="setTotal",Pe="actListProducts",Te="actGetProductByID",we="actListPrice",Le="actClearProducts",$e="products",Ee={namespaced:!0,state:()=>ye,getters:{product:t=>t.product,listProducts:t=>t.products,listAllProduct:t=>t.allProducts,getMapPrices:t=>t.prices,totalProducts:t=>t.totalProducts},actions:{[Pe]({commit:t,dispatch:e},s={page:1,limit:0,categoryId:null,brandId:null}){let i="/v1/products",n=["status=activated","sort.order=1","platforms=website","services=delivery"];s.page&&n.push(`page=${s.page}`),s.limit&&n.push(`ppp=${s.limit}`),s.categoryId&&n.push(`categoryIds=${s.categoryId}`),s.brandId&&n.push(`brandIds=${s.brandId}`),n.length>0&&(i=`${i}?${n.join("&")}`);const a=e(we),r=E.client.get(i,L({id:"none",action:Pe,capLoading:!0,capError:!0})).then((({data:e})=>{const s=(0,p.Z)([],["data","items"],e),i=(0,p.Z)([],["data","total"],e);return t(be,s),t(ke,s),t(Ie,i),s}),(t=>(console.debug("List Dishes err:",t.response),null)));Promise.all([a,r]).then((t=>t),(t=>(console.debug("List product err:",t.response),null)))},[Te]:({commit:t},e)=>E.client.get(`/v1/products/${e}`,L({id:e,action:Te,capLoading:!0,capError:!0})).then((({data:e})=>{let s=(0,p.Z)(null,["data","item"],e);return t(xe,s),t(ke,[s]),s}),(t=>(console.debug("Get product err:",t.response),null))),[we]:({commit:t})=>E.client.get("/v1/priceLists",L({id:"all",action:we,capLoading:!0,capError:!0})).then((e=>{let s=[],i=e.data,n={};return s=(0,et.Z)((0,p.Z)([],["data","items"],i).map((t=>(0,p.Z)([],["priceItems"],t)))),s.forEach((function(t){Object.keys(n).includes(t.productId)||(n[t.productId]=t)})),t(Se,n),n}),(t=>(console.debug("List prices err",t.response),null))),[Le]({commit:t}){t(be,[])}},mutations:{[Ie](t,e){t.totalProducts=e},[be](t,e){t.products=e},[ke](t,e){t.allProducts=(0,_e.Z)((t=>t._id),t.allProducts.concat(e))},[xe](t,e){t.product=e},[Se](t,e){t.prices=e}}},Ze={...(0,h.rn)($e,{}),...(0,h.Se)($e,{listProducts:"listProducts",listAllProduct:"listAllProduct",getMapPrices:"getMapPrices",totalProducts:"totalProducts",product:"product"})},De=((0,h.OI)($e,{}),{...(0,h.nv)($e,{actListProducts:Pe,actGetProductByID:Te,actClearProducts:Le,actListPrices:we})}),Oe={props:{primary:{type:Boolean,default:!1},size:{type:String,default:"normal"},onClick:{type:Function,default:()=>()=>{}}},methods:{handleClick(t){this.onClick(t)}}},qe=(0,Ft.Z)(Oe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["button","ripple",{"is-primary":t.primary,"is-small":"small"===t.size,"is-tiny":"tiny"===t.size}],on:{click:t.handleClick}},[s("span",{staticClass:"label"},[t._t("default")],2)])}),[],!1,null,"7b0e022a",null).exports,Ne=(0,Ft.Z)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[t._t("header")],2),t._v(" "),t.$slots.default?s("div",{staticClass:"card-body"},[t._t("default")],2):t._e(),t._v(" "),t.$slots.footer?s("div",{staticClass:"card-footer"},[t._t("footer")],2):t._e()])}),[],!1,null,"09e1015d",null).exports,Be={props:{href:{type:String,required:!0}}},Fe=(0,Ft.Z)(Be,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("a",t._g({staticClass:"link",attrs:{href:t.href}},t.$listeners),[t._t("default")],2)}),[],!1,null,"3378b08a",null).exports,Ae={name:"Coutner",components:{},props:{limit:{type:Number,default:0},val:{type:Number,required:!0,default:0},changeVal:{type:Function,required:!0}},data(){return{count:this.val>this.limit?this.val:this.limit}},watch:{val:{handler(t,e){t!==e&&t!==this.count&&(this.count=t)}},count(t){this.changeVal(parseInt(t))}},mounted(){this.val<this.limit&&this.changeVal(this.limit)},methods:{changeCounter(t){switch(t){case"-":this.count>this.limit&&this.count--;break;case"+":this.count++}}}},Me=(0,Ft.Z)(Ae,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"counter"},[s("FaIcon",{staticClass:"counter-btn",attrs:{icon:"minus-circle"},on:{click:function(e){return t.changeCounter("-")}}}),t._v(" "),s("div",{staticClass:"mx-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"counter-input",attrs:{type:"number",inputmode:"numeric",pattern:"[0-9]*"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}})]),t._v(" "),s("FaIcon",{staticClass:"counter-btn",attrs:{icon:"plus-circle"},on:{click:function(e){return t.changeCounter("+")}}})],1)}),[],!1,null,"e08d757c",null).exports,Ge=(0,Ft.Z)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",t._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}},t.$listeners),[s("path",{attrs:{d:"M12 39h32V2H12C8.691 2 6 4.691 6 8v34.417C6 45.496 8.691 48 12 48h32v-2H12c-2.168 0-4-1.641-4-3.583C8 40.501 9.757 39 12 39zm24.709-7.294a.997.997 0 01-1.414.002l-6.523-6.494-1.76 1.76-1.846-1.879 3.153-3.153 8.387 8.349c.391.39.393 1.023.003 1.415zM16.286 10.007l7.733 7.781-3.044 3.044L16.23 16a4.199 4.199 0 01.056-5.993zm-1.957 20.286l13.024-13.024c-.034-.085-.083-.163-.107-.252-.399-1.509-.322-3.426 1.045-4.777 2.031-2.094 5.497-2.989 6.998-1.505 1.501 1.571.596 4.909-1.435 6.916-1.444 1.428-3.298 1.545-4.8 1.16-.104-.027-.196-.081-.294-.122L14.743 31.707c-.195.195.549.293.293.293s-.512-.098-.707-.293a.999.999 0 010-1.414z"}})])}),[],!1,null,null,null).exports,Ve={components:{Box:Qt,Card:Ne,Link:Fe,Button:qe,Counter:Me,HowToCookIcon:Ge},props:{img:{type:String,default:null},bgImg:{type:String,default:null},code:{type:String,required:!0},title:{type:String,required:!0},link:{type:String,default:null},subTitle:{type:String,default:null},price:{type:Number,required:!0},vat:{type:Number,default:0},discount:{type:Number,default:null},onSelect:{type:Function,required:!0},onPurchase:{type:Function,required:!0}},data:()=>({numberProduct:0}),computed:{totalPrice(){return this.numberProduct>0?A(this.numberProduct*this.price):A(this.price)}},methods:{inc(t){this.numberProduct=t},onClick(){this.onSelect(this.numberProduct),this.numberProduct=0},onBtnInfo(){this.onSelect(this.numberProduct),this.numberProduct=0},onBtnQuickBuy(){this.numberProduct?(this.onPurchase(this.numberProduct),this.numberProduct=0):this.$toast({type:"error",id:"add-product",message:"Vui lòng chọn số lượng sản phẩm"})}}},Re=(0,Ft.Z)(Ve,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{staticClass:"dish",scopedSlots:t._u([{key:"header",fn:function(){return[s("div",{staticClass:"dish-header"},[t.discount?s("div",{staticClass:"dish-discount"},[t._v(t._s(t.discount+"%"))]):t._e(),t._v(" "),s("Box",{staticClass:"dish-image",attrs:{shape:"square"}},[s("div",{staticClass:"image-container",style:{backgroundImage:"url('"+t.bgImg+"')"},on:{click:function(){return t.onClick()}}},[t.img?s("img",{ref:"image",staticClass:"image",attrs:{src:t.img,alt:"dish-img",srcset:""}}):t._e()])])],1)]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"dish-footer"},[s("div",{staticClass:"flex flex-row justify-between items-center flex-wrap"},[s("p",{staticClass:"price"},[t._v(t._s(t.$n(t.totalPrice,"currency")))]),t._v(" "),s("Counter",{staticClass:"dish-counter",attrs:{val:t.numberProduct,"change-val":t.inc}})],1),t._v(" "),s("Button",{staticClass:"purchase-button mt-2 md:right-1/2",attrs:{primary:"","on-click":function(){return t.onBtnInfo()}}},[s("span",{staticClass:"hidden xs:inline-block"},[t._v("Mua")])])],1)]},proxy:!0}])},[t._v(" "),s("div",{staticClass:"product-content"},[s("span",{staticClass:"title"},[s("Link",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onClick()}}},[t._v("\n          ["+t._s(t.code.toUpperCase())+"] - "+t._s(t.title)+"\n        ")])],1),t._v(" "),t.link?s("p",{staticClass:"text-body-2 italic text-white"},[s("a",{staticClass:"hover:underline",attrs:{href:t.link,target:"_blank"}},[s("HowToCookIcon",{staticClass:"w-5 inline-block mb-1",staticStyle:{fill:"white"}}),t._v(" Hướng dẫn nấu\n        ")],1)]):t._e(),t._v(" "),s("p",{staticClass:"vat"},[t._v("Giá chưa bao gồm VAT, và chưa bao gồm phí vận chuyển")])])])}),[],!1,null,"b031817a",null).exports,je={classesInput:{type:[Object,Array,String],default:()=>{}},onChange:{type:Function,required:!0},icon:{type:String,required:!1,default:null},value:{type:String,default:""},label:{type:String,required:!1,default:null},name:{type:String,required:!1,default:null},placeholder:{type:String,required:!1,default:null},pattern:{type:String,required:!1,default:"text"},inputmode:{type:String,required:!1,default:"text"},type:{type:String,required:!1,default:"text"},errMsg:{type:String,required:!1,default:null},required:{type:Boolean,default:!1}},He={props:{...je},watch:{value:{handler(t,e){t!==e&&this.onChange(t)},deep:!0,immediate:!0}},methods:{handleChange(t){this.onChange(t.target.value)}}},ze=(0,Ft.Z)(He,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-field"},[t.label?s("label",{staticClass:"label",attrs:{for:t.name}},[t._v(t._s(t.label)+" "),1==t.required?s("span",{staticClass:"text-red-500"},[t._v("*")]):t._e()]):t._e(),t._v(" "),s("div",{class:[t.classesInput,"field",{"is-error":null!=t.errMsg}]},[t.icon?s("FaIcon",{staticClass:"text-light",attrs:{icon:t.icon}}):t._e(),t._v(" "),t._t("icon"),t._v(" "),s("input",{class:["input",{"has-icon":t.icon||t.$slots.icon}],attrs:{name:t.name,inputmode:t.inputmode,pattern:t.pattern,type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.handleChange}})],2),t._v(" "),null!=t.errMsg?s("div",{staticClass:"text-body-2 text-red-600 mt-1"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e()])}),[],!1,null,"a998cdca",null).exports,Ue={components:{},props:{items:{type:Array,default:()=>[]},onChange:{type:Function,required:!0},label:{type:String,required:!1,default:null}},data(){return{checks:this.items.reduce(((t,e)=>({...t,[e.name]:!!e.checked})),{})}},watch:{checks(t){this.onChange((0,y.Z)(t))}},methods:{select(t,e){this.checks={...this.checks,[t]:e.target.checked}}}},We=(0,Ft.Z)(Ue,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"checkbox-group"},[t.label?s("label",[t._v(t._s(t.label))]):t._e(),t._v(" "),t._l(t.items,(function(e,i){return[s("label",{key:i+e.value,staticClass:"checkbox"},[s("span",{staticClass:"checkbox__input"},[s("input",{attrs:{type:"checkbox",name:e.name},domProps:{value:e.value,checked:e.checked},on:{change:function(s){return t.select(e.name,s)}}}),t._v(" "),s("span",{class:["controller",{"is-checked":t.checks[e.name]}]})]),t._v(" "),s("span",{staticClass:"checkbox__label"},[t._v(t._s(e.label))])])]}))],2)}),[],!1,null,"490e6832",null).exports,Xe={components:{},props:{items:{type:Array,default:()=>[]},onChange:{type:Function,required:!0},name:{type:String,required:!0},label:{type:String,required:!1,default:null}},data(){const t=this.items.findIndex((t=>t.checked));return{selected:-1!==t?this.items[t].value:void 0}},watch:{selected(t){this.onChange({name:this.name,value:t})},items:{handler(t,e){if(!(0,st.Z)(t,e)){const e=t.findIndex((t=>t.checked));-1!==e&&this.onChange({name:this.name,value:t[e].value})}}}},methods:{select(t){this.selected=t.target.value}}},Ke=(0,Ft.Z)(Xe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"radio-group"},[t.label?s("label",[t._v(t._s(t.label))]):t._e(),t._v(" "),t._l(t.items,(function(e,i){return[s("label",{key:i,staticClass:"radio"},[s("span",{staticClass:"radio__input"},[s("input",{attrs:{type:"radio",name:t.name},domProps:{value:e.value,checked:e.checked},on:{change:function(e){return t.select(e)}}}),t._v(" "),s("span",{staticClass:"controller"})]),t._v(" "),s("span",{staticClass:"radio__label"},[t._v(t._s(e.label))])])]}))],2)}),[],!1,null,"47a45188",null).exports,Ye={components:{Card:Ne,Box:Qt,Link:Fe,Counter:Me,Button:qe,InputField:ze,CheckboxGroup:We,RadioGroup:Ke,HowToCookIcon:Ge},props:{img:{type:String,default:null},bgImg:{type:String,default:null},code:{type:String,required:!0},title:{type:String,required:!0},link:{type:String,default:null},subTitle:{type:String,default:null},price:{type:Number,required:!0},priceDiscount:{type:Number,required:!0},vat:{type:Number,default:0},ingredients:{type:Array,default:()=>[]},onPurchase:{type:Function,required:!0},defaultNumberProduct:{type:Number,default:1}},data(){return{numberProduct:this.defaultNumberProduct,saleOrderLine:{quantity:this.defaultNumberProduct,ingredients:this.ingredients.map((t=>({code:t.code,recipes:[]}))),note:""},roundMoney:A}},computed:{totalPrice(){return this.numberProduct>0?A(this.numberProduct*this.priceDiscount):0}},methods:{inc(t){this.numberProduct=t},selectOptions(t,e){let s=(0,it.Z)((0,nt.Z)("code",t.code))(this.saleOrderLine.ingredients);if(1==t.multiple){let t=Object.keys(e).filter((t=>1==e[t]));s.recipes=t}else if((0,p.Z)(null,["value"],e)){let t=[e.value];s.recipes=t}},confirmProduct(){this.saleOrderLine.quantity=this.numberProduct,this.onPurchase(this.saleOrderLine)}}},Qe=(0,Ft.Z)(Ye,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{staticClass:"dish-detail",scopedSlots:t._u([{key:"header",fn:function(){return[s("div",{staticClass:"dish-image"},[s("Box",{attrs:{shape:"square"}},[s("div",{staticClass:"p-16 bg-no-repeat bg-center bg-cover w-full h-full",style:{backgroundImage:"url('"+t.bgImg+"')"}},[t.img?s("img",{staticClass:"image",attrs:{src:t.img,alt:"dish-img",srcset:""}}):t._e()])])],1)]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"flex flex-row justify-between flex-wrap"},[s("div",{staticClass:"price"},[t.price!==t.priceDiscount?s("p",{staticClass:"inline-block line-through text-neutral-10"},[t._v("\n          "+t._s(t.$n(t.roundMoney(t.price),"currency"))+"\n        ")]):t._e(),t._v(" "),s("p",{staticClass:"inline-block"},[t._v(t._s(t.$n(t.roundMoney(t.priceDiscount),"currency")))])]),t._v(" "),s("Counter",{attrs:{limit:1,val:t.numberProduct,"change-val":t.inc},on:{"update:val":function(e){t.numberProduct=e}}})],1),t._v(" "),s("Button",{staticClass:"purchase-button mt-2",attrs:{primary:"","on-click":t.confirmProduct}},[t._v("\n      "+t._s(t.$n(t.totalPrice,"currency"))+" - Mua\n    ")])]},proxy:!0}])},[t._v(" "),s("div",[s("h3",{staticClass:"title"},[s("Link",{attrs:{href:"#"}},[t._v("\n        ["+t._s(t.code.toUpperCase())+"] - "+t._s(t.title)+"\n      ")])],1),t._v(" "),t.link?s("p",{staticClass:"text-body-2 italic text-white"},[s("a",{staticClass:"hover:underline",attrs:{href:t.link,target:"_blank"}},[s("HowToCookIcon",{staticClass:"w-5 inline-block mb-1",staticStyle:{fill:"white"}}),t._v(" Hướng dẫn nấu\n      ")],1)]):t._e()]),t._v(" "),t._l(t.ingredients,(function(e,i){return s("div",{key:i,staticClass:"dish-option-group"},[s("div",{staticClass:"py-2 -mx-2 md:-mx-4 bg-neutral-30"},[s("div",{staticClass:"dish-option-title"},[t._v(t._s(e.title))])]),t._v(" "),s("div",[s("div",{staticClass:"dish-option mt-2"},[!0===e.multiple?s("CheckboxGroup",{attrs:{"on-change":function(s){return t.selectOptions(e,s)},items:e.recipes.map((function(t){return{label:t.title,name:t.code,value:t.code,checked:!1}}))}}):s("RadioGroup",{attrs:{"on-change":function(s){return t.selectOptions(e,s)},name:e.code,items:e.recipes.map((function(t){return{label:t.title,value:t.code,checked:!1}}))}})],1)])])})),t._v(" "),s("InputField",{staticClass:"mt-2",attrs:{label:"Lời nhắn của bạn",icon:"edit",placeholder:"ví dụ: Không cay...","on-change":function(e){t.saleOrderLine.note=e}}}),t._v(" "),s("p",{staticClass:"vat"},[t._v("Giá chưa bao gồm VAT, và chưa bao gồm phí vận chuyển")])],2)}),[],!1,null,"5ed5b49e",null).exports,Je={NONE:"none",DISC:"disc"},ts={props:{type:{type:String,default:Je.NONE},inside:{type:Boolean,default:!1}},data:()=>({types:Je})},es=(0,Ft.Z)(ts,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ul",{class:[{list:t.type==t.types.NONE,"list-disc":t.type===t.types.DISC,"list-inside":t.inside}]},[t._t("default")],2)}),[],!1,null,"6841a2fa",null).exports,ss={props:{icon:{type:String,required:!0,default:"check"},onClick:{type:Function,required:!0,default:()=>()=>{}}},methods:{handleClick(t){this.onClick(t)}}},is=(0,Ft.Z)(ss,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("FaIcon",{staticClass:"icon-clickable",attrs:{icon:t.icon},on:{click:t.handleClick}})}),[],!1,null,"366ed19c",null).exports,ns={components:{Box:Qt,List:es,Counter:Me,IconClickable:is},props:{img:{type:String,required:!0},title:{type:String,required:!0},price:{type:Number,required:!0},ingredients:{type:Array,default:()=>[]},onCountChange:{type:Function,default:null},onRemove:{type:Function,default:null},quantity:{type:Number,required:!0},note:{type:String,default:""},round:{type:Boolean,default:!1}},computed:{totalPrice(){return this.round?A(this.quantity*this.price):this.quantity*this.price}}},as=(0,Ft.Z)(ns,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-item"},[s("div",{staticClass:"item-img"},[s("Box",{attrs:{shape:"square"}},[null!=t.img?s("img",{attrs:{src:t.img,alt:"",srcset:""}}):t._e()])],1),t._v(" "),s("div",{staticClass:"item-information"},[s("div",{staticClass:"flex flex-row justify-between"},[s("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),s("span",{staticClass:"price"},[t._v(t._s(t.$n(t.totalPrice,"currency")))])]),t._v(" "),t.onCountChange?t._e():s("span",{staticClass:"font-semibold"},[t._v("x "+t._s(t.quantity))]),t._v(" "),t.onRemove||t.onCountChange?s("div",{staticClass:"flex flex-row justify-between items-center mt-2"},[t.onCountChange?s("Counter",{attrs:{val:t.quantity,limit:1,"change-val":t.onCountChange},on:{"update:val":function(e){t.quantity=e}}}):t._e(),t._v(" "),t.onRemove?s("IconClickable",{staticClass:"text-light",attrs:{icon:"trash-alt","on-click":t.onRemove}}):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"options"},[s("List",{attrs:{type:"disc",inside:""}},[t._l(t.ingredients,(function(e,i){return[t._l(e.selectedRecipes,(function(e,n){return[s("li",{key:i+"-"+n},[t._v(t._s(e.title))])]}))]}))],2)],1),t._v(" "),t.note?s("div",{staticClass:"text-body-2 mt-2 text-light"},[t._v("Ghi chú: "+t._s(t.note))]):t._e()])])}),[],!1,null,"198a2dbc",null).exports,rs={components:{Card:Ne},props:{labelShow:{type:String,default:"Xem"},labelHide:{type:String,default:"Ẩn"},activated:{type:Boolean,default:!1}},data(){return{isActivated:this.activated}},methods:{toggle(){this.isActivated=!this.isActivated}}},os=(0,Ft.Z)(rs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["expander",{"is-activated":t.isActivated}]},[s("Card",{scopedSlots:t._u([{key:"header",fn:function(){return[s("div",{staticClass:"expander-header",on:{click:t.toggle}},[t._t("title"),t._v(" "),t.$slots.content?s("div",{staticClass:"header-end"},[t._v("\n          "+t._s(t.isActivated?t.labelHide:t.labelShow)),s("FaIcon",{staticClass:"ml-1",attrs:{icon:t.isActivated?"angle-up":"angle-down"}})],1):t._e()],2)]},proxy:!0},t.$slots.footer?{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}:null],null,!0)},[t._v(" "),t.$slots.content?s("div",{staticClass:"expander-content"},[t._t("content")],2):t._e()])],1)}),[],!1,null,"86d6402c",null).exports,ls={components:{Container:ie,CartItem:as,Button:qe,Expander:os},props:{onPurchase:{type:Function,default:null}},data:()=>({roundMoney:A}),computed:{...Ot},methods:{...qt,...Nt}},cs=(0,Ft.Z)(ls,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",{attrs:{size:"zero"}},[s("Expander",{staticClass:"cart",scopedSlots:t._u([{key:"title",fn:function(){return[s("span",[s("FaIcon",{attrs:{icon:"shopping-cart"}}),t._v(" "),s("span",{staticClass:"ml-1"},[t._v("Giỏ có "+t._s(t.productsInCart.map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0))+" món")])],1)]},proxy:!0},t.productsInCart.length>0?{key:"content",fn:function(){return[s("div",{staticClass:"cart-detail"},t._l(t.productsInCart,(function(e,i){return s("CartItem",{key:i+"-"+e._id,attrs:{img:e.thumbnail,title:e.title,quantity:e.quantity,price:e.priceAfterDiscount,ingredients:e.selectedIngredients,note:e.note,"on-count-change":function(e){return t.actSetLineCount({lineIdx:i,val:e})},"on-remove":function(){return t.actRemoveLine(i)},round:!0},on:{"update:quantity":function(s){return t.$set(e,"quantity",s)}}})})),1)]},proxy:!0}:null,t.productsInCart.length>0?{key:"footer",fn:function(){return[s("div"),t._v(" "),s("div",{staticClass:"justify-self-end"},[s("div",{staticClass:"text-right"},[s("span",{staticClass:"font-semibold text-accent-red-50 justify-self-end"},[t._v("\n            "+t._s(t.$n(t.roundMoney(t.productsInCart.reduce((function(t,e){return t+e.priceAfterDiscount*e.quantity}),0)),"currency")))])]),t._v(" "),s("Button",{staticClass:"mt-2",attrs:{primary:"",size:"tiny","on-click":t.onPurchase}},[t._v("Thanh toán")])],1)]},proxy:!0}:null],null,!0)})],1)}),[],!1,null,"f4bf2bac",null).exports,us={components:{Container:ie,IconClickable:is},props:{active:{type:Boolean,default:!1},iconClose:{type:Boolean,default:!0}},data(){return{isActivated:this.active}},watch:{active:{handler(t,e){t!==e&&this.isActivated!==t&&(this.isActivated=t)}},isActivated(t){this.$emit("update:active",t)}},methods:{toggle(){this.isActivated=!this.isActivated},off(){this.isActivated=!1}}},ds=(0,Ft.Z)(us,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["popup",{"is-activated":t.isActivated}]},[s("div",{staticClass:"w-full h-full fixed",on:{click:function(e){return t.$emit("update:active",!1)}}}),t._v(" "),s("Container",{staticClass:"popup-content",attrs:{size:"zero"}},[t._t("default",null,{off:t.off}),t._v(" "),t.iconClose?s("IconClickable",{staticClass:"close-button",attrs:{icon:"times-circle","on-click":t.off}}):t._e()],2)],1)}),[],!1,null,"33227713",null).exports,hs={data:()=>({isStick:!1}),mounted(){const t=this.$refs.stickyBar,e=t.offsetTop,s=this.$refs.triggerPosition;window.addEventListener("scroll",(()=>{window.pageYOffset>e?(this.isStick=!0,s.style.paddingTop=`${t.offsetHeight}px`):(this.isStick=!1,s.style.paddingTop="0px")}))}},ps=(0,Ft.Z)(hs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"triggerPosition",staticClass:"trigger-position"},[s("div",{ref:"stickyBar",class:["sticky-bar",{"is-sticky":t.isStick}]},[t._t("default")],2)])}),[],!1,null,"0733dea3",null).exports;var ms=s(8981);const gs={props:{pageTotal:{type:Number,required:!0},side:{type:Number,default:2},select:{type:Number,default:0},onSelect:{type:Function,required:!0}},data(){const t=Array.from(Array(this.pageTotal).keys());return{total:this.pageTotal,selected:this.select,items:t}},computed:{displaying(){if(this.items.length>0){const t=this.total-1,e=this.items.slice(this.selected-this.side>=0?this.selected-this.side:0,this.selected),s=(0,ms.Z)(this.side,this.items.slice(this.selected<t?this.selected+1:this.total));return[...e,this.items[this.selected],...s]}return[]}},watch:{pageTotal:{handler(t,e){t!==e&&t!==this.total&&(this.total=t,this.items=Array.from(Array(t).keys()))}},select:{handler(t,e){t!==e&&t!==this.selected&&(this.selected=t)}}},methods:{selectPage(t){this.selected=t,this.onSelect(t)},next(){this.selectPage(this.selected+1)},prev(){this.selectPage(this.selected-1)}}},vs=(0,Ft.Z)(gs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.total>0?s("div",{staticClass:"pagination"},[0!==t.displaying[0]||0!==t.selected?s("div",{staticClass:"pagination-item pagination-item-prev",on:{click:t.prev}},[s("FaIcon",{attrs:{icon:"chevron-left"}})],1):t._e(),t._v(" "),t._l(t.displaying,(function(e,i){return s("div",{key:i,class:["pagination-item pagination-item-page",{"is-activated":e===t.selected}],on:{click:function(){return t.selectPage(e)}}},[t._v("\n    "+t._s(e+1)+"\n  ")])})),t._v(" "),t.displaying[t.displaying.length-1]!==t.total-1||t.selected!==t.total-1?s("div",{staticClass:"pagination-item pagination-item-next",on:{click:t.next}},[s("FaIcon",{attrs:{icon:"chevron-right"}})],1):t._e()],2):t._e()}),[],!1,null,"f85cbac8",null).exports,fs={components:{},props:{isOpen:{type:Boolean,required:!0,default:!1}},data(){return{active:this.isOpen}},watch:{isOpen:{handler(t,e){t!==e&&this.active!==t&&(this.active=t)}}},methods:{closeSidebar(){this.active=!1,this.$emit("update:isOpen",this.active)}}},Cs=(0,Ft.Z)(fs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{class:["sidebar-container flex",{active:t.active}]},[s("div",{class:["sidebar",{active:t.active}]},[s("div",{class:["sidebar-inner h-full",{active:t.active}]},[s("div",{staticClass:"sidebar-header bg-brand-primary text-white"},[s("a",{on:{click:t.closeSidebar}},[t._t("title")],2),t._v(" "),s("FaIcon",{staticClass:"icon-times",attrs:{icon:"times"},on:{click:t.closeSidebar}})],1),t._v(" "),t._t("default")],2)]),t._v(" "),s("div",{staticClass:"flex-grow opacity-60",on:{click:t.closeSidebar}})])}),[],!1,null,"71c35bf3",null).exports,_s=(0,Ft.Z)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",t._g({attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 479.997 479.997"}},t.$listeners),[s("path",{attrs:{d:"M399.998 79.997h-40v-72A8 8 0 00349.742.325l-272 80c-.16 0-.28.16-.44.216a8.089 8.089 0 00-1.176.592 8.021 8.021 0 00-1.36.92c-.31.288-.599.598-.864.928a8.396 8.396 0 00-.92 1.368 8.26 8.26 0 00-.48 1.16 7.506 7.506 0 00-.352 1.736c0 .264-.152.488-.152.752v384a8 8 0 008 8h320a8 8 0 008-8v-384a8 8 0 00-8-8zm-56-61.312v61.312H135.55l208.448-61.312zm48 445.312h-304v-368h304v368z"}}),s("path",{attrs:{d:"M183.996 127.999a8 8 0 00-6.854 3.878l-17.144 28.568-17.144-28.568a8 8 0 00-14.857 4.12v64a8 8 0 0016 0v-35.12l9.144 15.24a8.312 8.312 0 0013.712 0l9.144-15.24v35.12a8 8 0 0016 0v-64a7.998 7.998 0 00-8.001-7.998zM231.998 175.997a8 8 0 000-16h-16v-16h16a8 8 0 000-16h-24a8 8 0 00-8 8v64a8 8 0 008 8h24a8 8 0 000-16h-16v-16h16zM287.998 127.997a8 8 0 00-8 8v30.112l-16.8-33.688a8 8 0 00-15.2 3.576v64a8 8 0 0016 0v-30.112l16.8 33.688a8 8 0 0015.2-3.576v-64a8 8 0 00-8-8zM343.998 127.997a8 8 0 00-8 8v48a8 8 0 01-16 0v-48a8 8 0 00-16 0v48c0 13.255 10.745 24 24 24s24-10.745 24-24v-48a8 8 0 00-8-8zM367.998 279.997h-256a8 8 0 000 16h256a8 8 0 000-16zM367.998 327.997h-256a8 8 0 000 16h256a8 8 0 000-16zM367.998 375.997h-256a8 8 0 000 16h256a8 8 0 000-16z"}})])}),[],!1,null,null,null).exports,ys=s.p+"assets/images/corgi.f2b2cf.png",bs={corgi:ys},ks="12",xs={name:"PDishesCollection",components:{Container:ie,Section:ne,Button:qe,Dish:Re,DishDetail:Qe,Cart:cs,Popup:ds,StickyScroll:ps,Pagination:vs,Sidebar:Cs,List:es,Slider:re,MenuIcon:_s,IconClickable:is},props:{brandSlug:{type:String,required:!0},page:{type:Number,default:0}},data:()=>({isListView:!1,isShowCategorySidebar:!1,isShowDetail:!1,selectedCategory:null,selectedProduct:null}),computed:{...ce,...J,...Wt,...fe,...Ze,...Ot,pageTotal(){return Math.ceil(this.totalProducts/parseInt(ks))},imgSrc:()=>bs.corgi},watch:{token(t){t&&this.loadBrandData()},isShowDetail(){this.isShowDetail||(this.selectedProduct=null)},brandSlug(){this.loadBrandData()},"$route.query"(t,e){if(t!==e){const{page:e="1",limit:s=ks,category:i}=t;i&&(this.selectedCategory=this.listCategories.find((t=>t.code===i.toUpperCase())),this.actListProducts({page:e,limit:s,categoryId:this.selectedCategory._id,brandId:this.brand._id}))}}},created(){this.actClearProducts(),this.actClearCategory(),this.actClearBrand()},mounted(){this.token&&this.loadBrandData()},destroyed(){document.title="MyLife Delivery",this.removeBrandColors()},methods:{...Xt,...Ce,...De,...Nt,loadBrandData(){const t=this.$route.query;this.actGetBrandByID(this.brandSlug).then((()=>{this.applyBrandColors(),document.title=this.brand.title,this.actListCategory({page:1,limit:0,brandId:this.brand._id}).then((()=>{this.actClearProducts();const{page:e="1",limit:s=ks,category:i}=t;if(i)return this.selectedCategory=this.listCategories.find((t=>t.code===i.toUpperCase())),void this.actListProducts({page:e,limit:s,categoryId:this.selectedCategory._id,brandId:this.brand._id});this.selectedCategory=this.listCategories.length>0?this.listCategories[0]:null,this.selectedCategory&&fi.push({name:"p-dishes-collection",query:{category:this.selectedCategory.code.toLowerCase(),page:"1",limit:ks}})}))}))},applyBrandColors(){const{primaryColor:t,primaryDarkColor:e,accentColor:s}=this.brand;document.body.style.setProperty("--color-child-secondary",e),document.body.style.setProperty("--color-child-primary",t),document.body.style.setProperty("--color-child-accent",s)},removeBrandColors(){document.body.style.removeProperty("--color-child-secondary"),document.body.style.removeProperty("--color-child-primary"),document.body.style.removeProperty("--color-child-accent")},goToCheckout(){this.accountIsLogged?fi.push({name:"p-checkout"}):fi.push({name:"p-otp-request",query:{checkout:"true"}})},purchaseProduct(t,e){e.targetId=this.brand._id,e.productId=t._id,e.price=(0,p.Z)(0,[t._id,"price"],this.getMapPrices),e.discount=(0,p.Z)(0,[t._id,"discount"],this.getMapPrices),e.priceAfterDiscount=(0,p.Z)(0,[t._id,"priceAfterDiscount"],this.getMapPrices),this.actAddNewProduct(e),this.isShowDetail=!1},onSelectPage(t){fi.push({name:"p-dishes-collection",query:{category:this.selectedCategory.code.toLowerCase(),page:`${t+1}`,limit:ks}})},quickPurchase(t,e){if(Array.isArray(t.ingredients)&&t.ingredients.length>0)this.showProductDetail(t,e);else if(e>0){let s={quantity:e,ingredients:[],note:""};this.purchaseProduct(t,s)}},showProductDetail(t,e){this.selectedProduct={...t,quantity:e},this.isShowDetail=!0},onSelectCategory(t){this.selectedCategory=t,this.isShowCategorySidebar=!1,fi.push({name:"p-dishes-collection",query:{category:t.code.toLowerCase()}})}}},Ss=(0,Ft.Z)(xs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[null!=t.selectedProduct?s("Popup",{staticClass:"popup-dish-detail",attrs:{active:t.isShowDetail},on:{"update:active":function(e){t.isShowDetail=e}}},[s("DishDetail",{attrs:{img:t.selectedProduct.image,"bg-img":t.brand.productBackground,code:t.selectedProduct.code,title:t.selectedProduct.title,link:t.selectedProduct.howToCookImg||t.selectedProduct.howToCookUrl,price:t.getMapPrices[t.selectedProduct._id]&&t.getMapPrices[t.selectedProduct._id].price||0,"price-discount":t.getMapPrices[t.selectedProduct._id]&&t.getMapPrices[t.selectedProduct._id].priceAfterDiscount||0,ingredients:t.selectedProduct.ingredients,"on-purchase":function(e){return t.purchaseProduct(t.selectedProduct,e)},"default-number-product":t.selectedProduct.quantity}})],1):t._e(),t._v(" "),s("StickyScroll",[s("Cart",{attrs:{"on-purchase":t.goToCheckout}})],1),t._v(" "),s("Container",[s("Section",{staticClass:"-mx-4"},[s("Slider",{attrs:{data:t.brand&&t.brand.gallery.length>0?t.brand.gallery:[]}})],1)],1),t._v(" "),s("Sidebar",{staticClass:"category-bar",attrs:{"is-open":t.isShowCategorySidebar},on:{"update:isOpen":function(e){t.isShowCategorySidebar=e},"update:is-open":function(e){t.isShowCategorySidebar=e}},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{staticClass:"bar-title"},[t._v("Danh mục món ăn")])]},proxy:!0},{key:"default",fn:function(){return[s("div",{staticClass:"bar-body"},[t.brand?s("div",{staticClass:"bar-image"},[s("img",{attrs:{src:t.brand.verticalImage,alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"bar-content"},[s("List",{staticClass:"bar-content-list"},t._l(t.listCategories,(function(e,i){return s("li",{key:i,class:{"text-brand-accent":t.selectedCategory&&t.selectedCategory._id===e._id},on:{click:function(){return t.onSelectCategory(e)}}},[t._v("\n              "+t._s(e.title.toUpperCase())+"\n            ")])})),0)],1)])]},proxy:!0}])}),t._v(" "),s("Container",[t.brand&&t.brand.services.includes("delivery")?s("Section",[s("div",{staticClass:"cursor-pointer block md:hidden text-light",on:{click:function(){return t.isShowCategorySidebar=!0}}},[s("MenuIcon",{staticClass:"w-5 inline-block mb-1",staticStyle:{fill:"white"}}),t._v(" "),s("span",{staticClass:"font-bold ml-1"},[t._v("\n          "+t._s(t.selectedCategory?"Menu: "+t.selectedCategory.title:"Chọn danh mục")+"\n        ")]),t._v(" "),s("FaIcon",{staticClass:"my-float ml-1",attrs:{icon:"caret-down"}})],1)]):t._e(),t._v(" "),t.brand&&t.brand.services.includes("delivery")?s("div",{staticClass:"flex flex-row"},[s("div",{staticClass:"hidden md:block md:w-1/4"},[s("div",{staticClass:"category-menu"},[s("div",{staticClass:"menu"},[t.brand?s("div",{staticClass:"menu-image"},[s("img",{attrs:{src:t.brand.verticalImage,alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"menu-content"},[s("List",{staticClass:"menu-content-list"},t._l(t.listCategories,(function(e,i){return s("li",{key:i,class:{"text-brand-accent":t.selectedCategory&&t.selectedCategory._id===e._id},on:{click:function(){return t.onSelectCategory(e)}}},[t._v("\n                  "+t._s(e.title.toUpperCase())+"\n                ")])})),0)],1)])])]),t._v(" "),s("div",{staticClass:"md:w-3/4",attrs:{id:"dishes"}},[t.listProducts.length>0?s("Section",[s("div",{staticClass:"flex flex-row items-center"},[s("div",{staticClass:"text-center flex-grow"},[s("h1",{staticClass:"text-title-2 text-light"},[t._v("Danh sách món")])]),t._v(" "),s("IconClickable",{class:["text-light text-xl",{"text-brand-accent":!t.isListView}],attrs:{"on-click":function(){return t.isListView=!1},icon:"grip-horizontal"}}),t._v(" "),s("IconClickable",{class:["text-light ml-2",{"text-brand-accent":t.isListView}],attrs:{"on-click":function(){return t.isListView=!0},icon:"list"}})],1),t._v(" "),s("div",{class:["grid gap-x-4 gap-y-4 mt-4",{"grid-cols-1 md:grid-cols-1":t.isListView},{"grid-cols-2 md:grid-cols-3":!t.isListView}]},t._l(t.listProducts,(function(e){return s("div",{key:e._id},[s("Dish",{class:{"is-row":t.isListView},attrs:{img:e.thumbnail,"bg-img":t.brand.productBackground,code:e.code,title:e.title,link:e.howToCookImg||e.howToCookUrl,"sub-title":e.description,price:t.getMapPrices[e._id]&&t.getMapPrices[e._id].priceAfterDiscount||0,discount:t.getMapPrices[e._id]&&t.getMapPrices[e._id].discount||0,vat:e.vat,"on-purchase":function(s){return t.quickPurchase(e,s)},"on-select":function(s){return t.showProductDetail(e,s)}}})],1)})),0)]):t.appIsLoading||0!==t.listProducts.length?t._e():s("Section",{staticClass:"py-4 text-center"},[s("span",{staticClass:"text-title-1 text-light md:text-large-2 font-extralight uppercase m-auto text-center py-4"},[t._v("\n            Danh mục này hiện tại chưa có sản phẩm nào\n          ")])]),t._v(" "),s("Section",[s("Pagination",{attrs:{"page-total":t.pageTotal,side:2,select:[].concat(t.$route.query.page)[0]?[].concat(t.$route.query.page)[0]-1:0,"on-select":t.onSelectPage}})],1)],1)]):t.brand&&!t.brand.services.includes("delivery")?s("div",{staticClass:"my-4"},[s("Section",[s("h2",{staticClass:"text-title-1 text-light md:text-large-2 lg:text-large font-extralight uppercase m-auto text-center py-4"},[t._v("\n          "+t._s(t.brand.title)+" hiện tại sẽ mở delivery sắp tới\n        ")])]),t._v(" "),s("Section",{staticClass:"w-1/4 m-auto transform -translate-y-1/3 text-center"},[s("img",{attrs:{src:t.imgSrc}}),t._v(" "),s("Section",[s("router-link",{attrs:{to:{name:"p-home"}}},[s("Button",{attrs:{primary:"",size:"small"}},[t._v("Về trang chủ")])],1)],1)],1)],1):t._e()],1)],1)}),[],!1,null,"e7d8b552",null).exports,Is={vi:s.p+"assets/images/vietnam.8bdd3c.png"},Ps={vi:"+84"},Ts={components:{InputField:ze},props:{...je,country:{type:String,default:"vi"}},data(){return{imgSrc:Is[this.country],code:"+84",number:""}},methods:{handleClickIcon(){this.onChange({code:Ps[this.country],number:this.number})},handleInputChange(t){const e=t.replace(/^0/,"");this.number=e,this.onChange({code:this.code,number:e})}}},ws=(0,Ft.Z)(Ts,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("InputField",t._b({staticClass:"input-number",attrs:{type:"number",inputmode:"numeric",pattern:"[0-9]*","on-change":t.handleInputChange}},"InputField",t.$props,!1),[s("div",{staticClass:"icon",attrs:{slot:"icon"},on:{click:t.handleClickIcon},slot:"icon"},[s("img",{attrs:{src:t.imgSrc,alt:t.country+"-flag"}})])])}),[],!1,null,"5467b54c",null).exports,Ls={name:"POTPRequest",components:{Container:ie,Section:ne,Button:qe,InputPhone:ws},data:()=>({countryCode:"+84",phoneNumber:null}),computed:{...J},methods:{...tt,handleChangePhone({code:t,number:e}){this.countryCode=t,this.phoneNumber=e},doSendOTPRequest(){let t=this.phoneNumber.startsWith("0")?this.phoneNumber.replace(/^0+/,""):this.phoneNumber;this.requestOTP({countryCode:this.countryCode,phone:t}).then((()=>{!0===this.phoneVerify.phoneExisted?fi.push({name:"p-otp-verify",query:this.$route.query}):fi.push({name:"p-register",query:this.$route.query})}))}}},$s=(0,Ft.Z)(Ls,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"number-section"},[s("div",{staticClass:"w-full sm:w-2/3 m-auto"},[s("div",{staticClass:"text-head-1"},[t._v("Nhập số điện thoại")]),t._v(" "),s("InputPhone",{staticClass:"py-6",attrs:{placeholder:"ví dụ: 09616xxxxxx","on-change":t.handleChangePhone}})],1)]),t._v(" "),s("Section",{staticClass:"action-section py-8"},[s("Button",{attrs:{primary:!0,"on-click":t.doSendOTPRequest}},[t._v("\n      Lấy OTP\n    ")])],1)],1)}),[],!1,null,"1f094595",null).exports,Es={name:"OTPDigit",props:{digit:{type:String,default:""}},mounted(){const{otp:t}=this.$refs;t.addEventListener("focus",(function(){this.select()}))},methods:{}},Zs={name:"POTPVerify",components:{Container:ie,Section:ne,OTPDigit:(0,Ft.Z)(Es,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-otp"},[s("input",{ref:"otp",attrs:{type:"number",pattern:"[0-9]*",inputmode:"numeric",autocomplete:"one-time-code"},domProps:{value:t.digit},on:{input:function(e){return t.$emit("change-digit",e.target.value)}}})])}),[],!1,null,"661f2774",null).exports,Button:qe},data:()=>({firstChar:"",secondChar:"",thirdChar:"",fourChar:""}),computed:{...J},mounted(){this.phoneVerify.phone;const{firstDigit:t,secondDigit:e,thirdDigit:s,fourDigit:i}=this.$refs,n=[t.$el,e.$el,s.$el,i.$el];n.includes(null)||(0,rt.Z)(((t,e)=>(t&&(t.addEventListener("input",(function(t){t.target.value&&(t.target.value=t.target.value[0])})),e.addEventListener("input",(function(e){e.target.value&&(e.target.value=e.target.value[0]),e.target.value||t.firstElementChild.focus()}))),e)),null,n)},methods:{...tt,...Nt,inputOTP(t,e){const{secondDigit:s,thirdDigit:i,fourDigit:n}=this.$refs;switch(t){case 0:this.firstChar=e[0],this.firstChar&&s.$el.firstElementChild.focus();break;case 1:this.secondChar=e[0],this.secondChar&&i.$el.firstElementChild.focus();break;case 2:this.thirdChar=e[0],this.thirdChar&&n.$el.firstElementChild.focus();break;case 3:this.fourChar=e[0]}e.length>1&&this.inputOTP(t+1,e.substring(1,e.length))},isValidOTP:function(){return""!==this.firstChar&&""!==this.secondChar&&""!==this.thirdChar&&""!==this.fourChar},smsCode:function(){return this.firstChar+this.secondChar+this.thirdChar+this.fourChar},submitOTP(){this.isValidOTP()&&this.verifyOTP({countryCode:this.phoneVerify.countryCode,phone:this.phoneVerify.phone,smsCode:this.smsCode()}).then((t=>{!0===t&&this.actInitCart().then((()=>{const t=this.$route.query;if("true"!==t.checkout){if(t.backUrl){const e=JSON.parse(JSON.stringify(t));return delete e.backUrl,void fi.push({path:t.backUrl,query:e}).then()}fi.push({name:"p-home"})}else fi.push({name:"p-checkout"})}))}))}}},Ds=(0,Ft.Z)(Zs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"otp-section"},[s("div",{staticClass:"text-head-1"},[t._v("Nhập mã OTP được gửi về điên thoại")]),t._v(" "),s("div",{staticClass:"digit-wrapper mt-6"},[s("OTPDigit",{ref:"firstDigit",attrs:{digit:t.firstChar},on:{"update:digit":function(e){t.firstChar=e},"change-digit":function(e){return t.inputOTP(0,e)}}}),t._v(" "),s("OTPDigit",{ref:"secondDigit",attrs:{digit:t.secondChar},on:{"change-digit":function(e){return t.inputOTP(1,e)}}}),t._v(" "),s("OTPDigit",{ref:"thirdDigit",attrs:{digit:t.thirdChar},on:{"change-digit":function(e){return t.inputOTP(2,e)}}}),t._v(" "),s("OTPDigit",{ref:"fourDigit",attrs:{digit:t.fourChar},on:{"change-digit":function(e){return t.inputOTP(3,e)}}})],1)]),t._v(" "),s("Section",{staticClass:"action-section py-8"},[s("Button",{attrs:{primary:!0,"on-click":t.submitOTP}},[t._v("Gửi OTP")])],1)],1)}),[],!1,null,"12c55192",null).exports,Os={name:"PRegister",components:{InputField:ze,InputPhone:ws,Button:qe},data:()=>({fullName:"",countryCode:"+84",phone:"",email:"",password:"",confirmedPassword:"",errCheck:{fullName:null,countryCode:null,phone:null,email:null}}),computed:{...J},methods:{...tt,...Nt,validateForm(){let t=!0;return this.fullName||(this.errCheck.fullName=this.$t("err.fullNameMissing"),t=!1),this.countryCode||(this.errCheck.countryCode=this.$t("err.countryCodeMissing"),t=!1),this.phone||(this.errCheck.phone=this.$t("err.phoneMissing"),t=!1),this.email?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.email).toLowerCase())||(this.errCheck.email=this.$t("err.emailInvalid"),t=!1):(this.errCheck.email=this.$t("err.emailMissing"),t=!1),t},signup(){if(this.validateForm()){let t={fullName:this.fullName,countryCode:this.countryCode||"+84",phone:this.phone,email:this.email};this.register(t).then((t=>{!0===t&&fi.push({name:"p-otp-verify"})}))}},inputText(t,e){this[t]=e,this.errCheck[t]=null},inputPhone(t){this.errCheck.phone=null,this.countryCode=t.code,this.phone=t.number}}},qs=(0,Ft.Z)(Os,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"px-4 md:w-1/2 md:m-auto"},[s("div",{staticClass:"w-full m-auto shadow-normal px-4 py-6 mb-6"},[s("form",[s("div",[s("InputField",{attrs:{classes:"mb-4",name:"fullName",label:"Họ và tên","on-change":function(e){return t.inputText("fullName",e)},required:!0,"err-msg":t.errCheck.fullName}})],1),t._v(" "),s("div",{staticClass:"mt-4"},[s("InputPhone",{staticClass:"mb-4",attrs:{label:"Số điện thoại",value:t.phoneVerify.phone,placeholder:"0961633712","on-change":t.inputPhone,required:!0,"err-msg":t.errCheck.phone}})],1),t._v(" "),s("div",{staticClass:"mt-4"},[s("InputField",{attrs:{classes:"mb-4",type:"email",name:"email",label:"Email","on-change":function(e){return t.inputText("email",e)},required:!0,"err-msg":t.errCheck.email}})],1)]),t._v(" "),s("div",{staticClass:"w-max m-auto mt-4"},[s("Button",{attrs:{primary:!0,"on-click":t.signup}},[t._v("Đăng ký")])],1)])])}),[],!1,null,null,null).exports,Ns={cities:[],districts:[],wards:[],transfers:[{bank:"Ngân hàng Á Châu (ACB)",accountOwner:"Nguyen Kim Xuan",accountNumber:"20090888"}]},Bs="setCities",Fs="setDistricts",As="setWards",Ms="actListLocations",Gs="actListCities",Vs="actListDistrictsByCity",Rs="actListWardsByDistrict",js="configs",Hs={namespaced:!0,state:()=>Ns,getters:{listCities:t=>t.cities,listDistricts:t=>t.districts,listWards:t=>t.wards,listTransfers:t=>t.transfers},actions:{[Ms](t,e={parentId:null}){let s=`/v1/configs?type=address&page=0&ppp=0&parentId=${e.parentId||null}&sort.order=1`;return E.client.get(s,L({action:Ms,id:"none",capError:!0,capLoading:!0})).then((t=>t))},[Gs]:({commit:t,dispatch:e})=>(t(Fs,[]),t(As,[]),e(Ms,{parentId:null}).then((e=>{let s=(0,p.Z)([],["data","data","items"],e);return t(Bs,s),s}),(t=>(console.debug("List cities err",t.response),null)))),[Vs]({commit:t,dispatch:e},s){t(As,[]),e(Ms,{parentId:s}).then((e=>{let s=(0,p.Z)([],["data","data","items"],e);return t(Fs,s),s}),(t=>(console.debug("List cities err",t.response),null)))},[Rs]({commit:t,dispatch:e},s){e(Ms,{parentId:s}).then((e=>{let s=(0,p.Z)([],["data","data","items"],e);return t(As,s),s}),(t=>(console.debug("List cities err",t.response),null)))}},mutations:{[Bs](t,e){t.cities=e},[Fs](t,e){t.districts=e},[As](t,e){t.wards=e}}},zs={...(0,h.rn)(js,{}),...(0,h.Se)(js,{listCities:"listCities",listDistricts:"listDistricts",listWards:"listWards",listTransfers:"listTransfers"})},Us=((0,h.OI)(js,{}),{...(0,h.nv)(js,{actListCities:Gs,actListDistrictsByCity:Vs,actListWardByDistrict:Rs})}),Ws={LEFT:"left",RIGHT:"right"},Xs={props:{toggle:{type:Boolean,default:!0},position:{type:String,default:Ws.RIGHT}},data:()=>({isActivated:!1,pos:Ws}),methods:{hasSlot:function(t="default"){return!!this.$slots[t]||!!this.$scopedSlots[t]},off(){this.isActivated=!1},on(){this.isActivated=!0},toggleContent(){this.isActivated=!this.isActivated}}},Ks=(0,Ft.Z)(Xs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.off,expression:"off"}],staticClass:"dropdown"},[s("div",{staticClass:"trigger flex items-center flex-row",on:{click:t.toggleContent}},[t._t("trigger",null,{toggle:t.toggleContent,on:t.on})],2),t._v(" "),t.hasSlot("content")?s("div",{class:["content-wrap",{"is-activated":t.isActivated,"right-0":t.position==t.pos.LEFT}]},[s("div",{staticClass:"content"},[t._t("content",null,{off:t.off})],2)]):t._e()])}),[],!1,null,"800f651c",null).exports,Ys={components:{Dropdown:Ks,List:es},props:{icon:{type:String,default:"bars"},field:{type:String,default:"label"},initial:{type:Object,default:()=>null},placeholder:{type:String,default:null},onSelect:{type:Function,default:()=>()=>{}},items:{type:Array,default:()=>[]}},data(){return{selected:this.initial||{id:null,name:null,label:null}}},methods:{select(t){this.selected=t,this.onSelect(t)}}},Qs=(0,Ft.Z)(Ys,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Dropdown",{scopedSlots:t._u([{key:"trigger",fn:function(){return[s("div",{staticClass:"selected"},[s("FaIcon",{attrs:{icon:t.icon}}),s("span",{staticClass:"ml-2"},[t._v(t._s(t.selected[t.field]?t.selected[t.field]:t.placeholder))])],1)]},proxy:!0},{key:"content",fn:function(e){var i=e.off;return[s("div",{},[s("div",{staticClass:"selections"},[s("List",{staticClass:"w-max pb-2 px-4"},t._l(t.items,(function(e,n){return s("li",{key:n+e.name,staticClass:"item",on:{click:function(){t.select(e),i()}}},[t._t("item",null,{item:e})],2)})),0)],1)])]}}],null,!0)})}),[],!1,null,"702b5ba2",null).exports;var Js=s(4221),ti=s(7438);const ei=(0,Ft.Z)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shadow"},[s("div",{staticClass:"shadow-spacer"},[s("div",{staticClass:"shadow-display"},[t._t("default")],2)])])}),[],!1,null,"0b4b1204",null).exports,si={components:{Dropdown:Ks,InputField:ze,Shadow:ei,IconClickable:is},props:{items:{type:Array,default:()=>[]},preprocesser:{type:Function,default:(t,e)=>((t,e)=>{if(!t)return e;const s=new Js.Z(e,{includeScore:!0,keys:["label"]}).search(t);return(0,ti.Z)((t=>t.score),s).map((t=>t.item))})(t,e)},isSelected:{type:[Boolean,Object],default:!1},label:{type:String,required:!1,default:null},name:{type:String,required:!1,default:null},placeholder:{type:String,required:!1,default:null},filter:{type:Function,default:()=>()=>!0},compContent:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},errMsg:{type:String,required:!1,default:null},required:{type:Boolean,default:!1}},data:()=>({term:"",selectedItem:null}),computed:{filteredItems(){return this.preprocesser(this.term,(0,y.Z)(this.items)).filter(((...t)=>this.filter(this.term,...t)))}},watch:{selectedItem(t){this.onChange((0,y.Z)(t))},isSelected:{handler(t,e){const s=!!this.selectedItem;t||t===e||t===s||(this.selectedItem=null)}}},methods:{changeTerm(t){this.term=t},select(t){this.selectedItem=t},remove(){this.selectedItem=null}}},ii=(0,Ft.Z)(si,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-filtered"},[s("div",{staticClass:"filtered-label"},[t._v(t._s(t.label)+" "),1==t.required?s("span",{staticClass:"text-red-500"},[t._v("*")]):t._e()]),t._v(" "),t.selectedItem?s("span",{staticClass:"filtered-selected"},[s("IconClickable",{staticClass:"text-lg mb-1",attrs:{icon:"window-close","on-click":t.remove}}),t._v(" "),s("span",{staticClass:"ml-2 font-semibold"},[t._v(t._s(t.selectedItem.label))])],1):s("Dropdown",{attrs:{toggle:!1},scopedSlots:t._u([{key:"trigger",fn:function(e){var i=e.on;return[s("InputField",{staticClass:"select-filtered-input",attrs:{placeholder:t.placeholder,"on-change":function(e){t.changeTerm(e),i()},"err-msg":t.errMsg}})]}},!t.selectedItem&&t.filteredItems.length>0?{key:"content",fn:function(){return[s(t.compContent?t.compContent:"div",{tag:"component",staticClass:"select-filtered-selections"},[t._l(t.filteredItems,(function(e,s){return[t._t("item",null,{select:function(){return t.select(e)},item:e,idx:s})]}))],2)]},proxy:!0}:null],null,!0)})],1)}),[],!1,null,"022f28ec",null).exports,ni={components:{Container:ie,Section:ne,Button:qe,InputField:ze,InputPhone:ws,Dropdown:Ks,List:es,DropdownList:Qs,CheckboxGroup:We,Counter:Me,RadioGroup:Ke,SelectFiltered:ii,Shadow:ei},data:()=>({dropdownListItems:[{id:1234,name:"hello-1",label:"Hello World!"},{id:12345,name:"hello-2",label:"Hello World! 2"}],checkboxItems:[{id:1234,name:"hello-1",label:"Hello World!",value:"1234"},{id:12345,name:"hello-2",label:"Hello World! 2",value:"123478"}],selections:[{id:1234,name:"hello-1",label:"Hello World!",value:"1234"},{id:12345,name:"hello-2",label:"Hello World! 2",value:"123478"}],selectedCity:null,selectedDistrict:null,selectedWard:null}),computed:{...J,...zs},mounted(){this.actListCities()},methods:{...tt,...Us,buttonClick(t){console.log(t)},inputFieldChange(t){console.log(t)},checkboxGroupChange(t){console.log(t)},changeCounter(t){console.log("changing counter===>",t)},onCitySelected(t){this.selectedCity=t,this.selectedDistrict=null,this.actListDistrictsByCity(t.id)},onDistrictSelected(t){this.selectedDistrict=t,this.selectedWard=null,this.actListWardByDistrict(t.id)},compSelectionContent:()=>es}},ai=(0,Ft.Z)(ni,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Button")]),t._v(" "),s("Button",{attrs:{primary:"","on-click":t.buttonClick}},[t._v("Button Primary")]),t._v(" "),s("Button",{staticClass:"ml-4",attrs:{"on-click":t.buttonClick}},[t._v("Button Normal")])],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("InputField")]),t._v(" "),s("InputField",{staticClass:"mb-4",attrs:{"on-change":t.inputFieldChange}}),t._v(" "),s("InputField",{staticClass:"mb-4",attrs:{"on-change":t.inputFieldChange,icon:"user"}}),t._v(" "),s("InputField",{staticClass:"mb-4",attrs:{"on-change":t.inputFieldChange}},[s("FaIcon",{attrs:{slot:"icon",icon:"user"},slot:"icon"})],1),t._v(" "),s("InputField",{staticClass:"mb-4",attrs:{label:"Username:",name:"username","on-change":t.inputFieldChange}},[s("FaIcon",{attrs:{slot:"icon",icon:"user"},slot:"icon"})],1),t._v(" "),s("InputField",{attrs:{label:"Username:",name:"username",placeholder:"danh.tt@init.vn","on-change":t.inputFieldChange}},[s("FaIcon",{attrs:{slot:"icon",icon:"user"},slot:"icon"})],1)],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("InputPhone")]),t._v(" "),s("InputPhone",{staticClass:"mb-4",attrs:{label:"Number only",placeholder:"0961633712","on-change":t.inputFieldChange}})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Dropdown")]),t._v(" "),s("Dropdown",[s("FaIcon",{attrs:{slot:"trigger",icon:"bars"},slot:"trigger"}),t._v(" "),s("List",{staticClass:"w-max",attrs:{slot:"content"},slot:"content"},[s("li",[t._v("Hello 1")]),t._v(" "),s("li",[t._v("Hello 2")])])],1)],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("DropdownList")]),t._v(" "),s("DropdownList",{attrs:{items:t.dropdownListItems},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item;return[t._v("\n        "+t._s(s.label)+"\n      ")]}}])})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Counter")])]),t._v(" "),s("Section",[s("Counter",{attrs:{val:10,"change-val":t.changeCounter}})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("CheckboxGroup")])]),t._v(" "),s("Section",[s("CheckboxGroup",{attrs:{label:"Hello Group Label",items:t.checkboxItems,"on-change":t.checkboxGroupChange}})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("RadioGroup")])]),t._v(" "),s("Section",[s("RadioGroup",{attrs:{name:"radio-1",label:"Hello Group Label",items:t.checkboxItems,"on-change":t.checkboxGroupChange}})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("SelectFiltered")]),t._v(" "),s("SelectFiltered",{attrs:{label:"Tỉnh / Thành phố",placeholder:"ví dụ: ho chi minh",items:t.listCities.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"comp-content":t.compSelectionContent()},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,n=e.select;return[s("li",{staticClass:"hover:text-primary hover:font-semibold cursor-pointer",on:{click:n}},[t._v("\n          "+t._s(i.label)+"\n        ")])]}}])})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Thanh pho/ Tinh")]),t._v(" "),s("DropdownList",{attrs:{items:t.listCities.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"on-select":t.onCitySelected},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item;return[t._v("\n        "+t._s(s.label)+"\n      ")]}}])})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Quan / Huyen")]),t._v(" "),s("DropdownList",{attrs:{items:t.listDistricts.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"on-select":t.onDistrictSelected},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item;return[t._v("\n        "+t._s(s.label)+"\n      ")]}}])})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Phuong / Xa")]),t._v(" "),s("DropdownList",{attrs:{items:t.listWards.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"on-select":function(e){return t.selectedWard=e}},scopedSlots:t._u([{key:"item",fn:function(e){var s=e.item;return[t._v("\n        "+t._s(s.label)+"\n      ")]}}])})],1),t._v(" "),s("Section",[s("h1",{staticClass:"text-title-1 mb-4"},[t._v("Shadow")]),t._v(" "),s("Shadow",[t._v("\n      shadown ne\n    ")])],1)],1)}),[],!1,null,"073918d5",null).exports,ri={components:{Section:ne,Container:ie,CartItem:as,Expander:os,InputField:ze,InputPhone:ws,Button:qe,SelectFiltered:ii,RadioGroup:Ke},data:()=>({target:"self",isTransfer:!1,isCOD:!0,note:"",fullName:"",countryCode:"+84",phone:"",email:"",address:"",voucherCode:null,selectedCity:null,selectedDistrict:null,selectedWard:null,errCheck:{fullName:null,countryCode:null,phone:null,email:null,city:null}}),computed:{...Ot,...J,...zs},mounted(){this.accountIsLogged?this.actListCities():fi.push({name:"p-otp-request",replace:!0})},methods:{...Nt,...tt,...Us,...De,validateForm(){let t=!0;return this.fullName||(this.errCheck.fullName=this.$t("err.fullNameMissing"),t=!1),this.countryCode||(this.errCheck.countryCode=this.$t("err.countryCodeMissing"),t=!1),this.phone||(this.errCheck.phone=this.$t("err.phoneMissing"),t=!1),this.email?B.test(String(this.email).toLowerCase())||(this.errCheck.email=this.$t("err.emailInvalid"),t=!1):(this.errCheck.email=this.$t("err.emailMissing"),t=!1),this.address||(this.errCheck.address=this.$t("err.addressMissing"),t=!1),this.selectedCity||(this.errCheck.city=this.$t("err.cityMissing"),t=!1),this.selectedDistrict||(this.errCheck.district=this.$t("err.districtMissing"),t=!1),this.errCheck={...this.errCheck},t},inputText(t,e){this[t]=e,this.errCheck[t]=null},inputPhone(t){this.errCheck.phone=null,this.countryCode=t.code,this.phone=t.number},changeDeliveryTarget(t){this.target=t.value,"others"===t.value&&(this.fullName="",this.phone="",this.email="")},onCitySelected(t){this.selectedCity=t,this.selectedDistrict=null,t&&this.actListDistrictsByCity(t.id)},onDistrictSelected(t){this.selectedDistrict=t,this.selectedWard=null,t&&this.actListWardByDistrict(t.id)},useVoucher(){this.voucherCode&&this.actUseVoucher(this.voucherCode)},compSelectionContent:()=>es,submitOrder(){if(this.validateForm()){let t={subhead:this.note,type:N,fullName:this.fullName,countryCode:this.countryCode,phone:this.phone,email:this.email,paymentMethod:this.isTransfer?"banking":"cod",address:[this.address.trim(),(0,p.Z)("",["label"],this.selectedWard).trim(),(0,p.Z)("",["label"],this.selectedDistrict).trim(),(0,p.Z)("",["label"],this.selectedCity).trim()].join(", ")};this.actSubmitOrder(t).then((()=>{fi.replace({name:"p-success"})}))}}}},oi=(0,Ft.Z)(ri,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"cart-section"},[s("span",{staticClass:"text-title-2"},[t._v("Đơn hàng của bạn")]),t._v(" "),s("Expander",{staticClass:"cart-checkout mt-4",attrs:{activated:"","label-show":"Chi tiết","label-hide":"Rút gọn"},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",[t._v(" "+t._s(t.productsInCart.length)+" món ")])]},proxy:!0},{key:"content",fn:function(){return[t.productsInCart.length>0?s("div",{staticClass:"cart-detail"},t._l(t.productsInCart,(function(e,i){return s("CartItem",{key:i+"-"+e._id,attrs:{img:e.thumbnail,title:e.title,quantity:e.quantity,price:e.priceAfterDiscount,ingredients:e.selectedIngredients,vat:e.vat,note:e.note,round:!1},on:{"update:quantity":function(s){return t.$set(e,"quantity",s)}}})})),1):t._e()]},proxy:!0}])}),t._v(" "),s("div",{staticClass:"mt-4 py-2 border-t border-b"},[s("div",{staticClass:"text-body-2"},[s("span",[t._v("Tạm tính")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.$n(t.cart.subTotal,"currency")))])]),t._v(" "),s("div",{staticClass:"clear-both mt-2 text-body-2"},[s("span",[t._v("Giảm giá")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.$n(t.cart.voucherDiscount,"currency")))])]),t._v(" "),"KHTT"!==t.cart.memberLevelName||t.cart.memberDiscount>0?s("div",{staticClass:"clear-both mt-2 text-body-2"},[s("span",[t._v("Giảm giá thành viên "+t._s(t.cart.memberLevelName))]),t._v(" "),s("span",{staticClass:"float-right"},[t._v("- "+t._s(t.$n(t.cart.memberDiscountTotal,"currency")))])]):t._e(),t._v(" "),s("div",{staticClass:"clear-both mt-2 text-body-2"},[s("span",[t._v("VAT")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.$n(t.cart.tax>0?t.cart.tax:0,"currency")))])]),t._v(" "),s("div",{staticClass:"clear-both mt-4 text-body-2 text-neutral-10"},[t._v("\n        Đơn hàng chưa bao gồm phí vận chuyển. Quý khách hàng sẽ được thông báo phí vận chuyển sau khi đơn hàng được\n        xác nhận\n      ")])]),t._v(" "),s("Section",[s("InputField",{staticClass:"mt-2",attrs:{label:"Lời nhắn của bạn",icon:"edit",placeholder:"Gọi trước khi giao...","on-change":function(e){return t.inputText("note",e)}}})],1),t._v(" "),s("Section",[s("div",{staticClass:"text-body-1"},[t._v("Hình thức thanh toán")]),t._v(" "),s("RadioGroup",{attrs:{"on-change":function(e){t.isTransfer="transfer"===e.value,t.isCOD="cod"===e.value},name:"payment-method",items:[{label:"Thanh toán khi nhận hàng (COD)",value:"cod",checked:!0},{label:"Chuyển khoản",value:"transfer",checked:!1}]}})],1),t._v(" "),t.isCOD?s("Section",[s("div",{staticClass:"border-t py-4 text-red-500"},[s("div",[t._v("Không áp dụng cho YEN Sushi & Sake Pub")])])]):t._e(),t._v(" "),t.isTransfer?s("Section",t._l(t.listTransfers,(function(e,i){return s("div",{key:i,staticClass:"border-t py-4"},[s("div",[t._v(t._s(e.bank))]),t._v(" "),s("div",[t._v("Người thụ hưởng: "+t._s(e.accountOwner))]),t._v(" "),s("div",[t._v("Số tài khoản: "+t._s(e.accountNumber))])])})),0):t._e(),t._v(" "),s("div",{staticClass:"mt-4 lg:mt-16 py-2 border-t border-b font-semibold"},[s("span",[t._v("Thành tiền")]),t._v(" "),s("span",{staticClass:"float-right"},[t._v(t._s(t.$n(t.cart.total,"currency")))])])],1),t._v(" "),s("Section",{staticClass:"address-section"},[s("span",{staticClass:"text-title-2"},[t._v("Thông tin giao hàng")]),t._v(" "),s("div",{staticClass:"mt-4"},[s("RadioGroup",{attrs:{name:"radio-1",items:[{name:"self",label:"Đặt hàng cho tôi",value:"self",checked:!0},{name:"others",label:"Đặt hàng cho người khác",value:"others"}],"on-change":t.changeDeliveryTarget}}),t._v(" "),"self"===t.target?s("div",[s("InputField",{staticClass:"mt-4",attrs:{name:"fullName",label:"Họ và tên",placeholder:"John Doe",value:t.user.fullName,"on-change":function(e){return t.inputText("fullName",e)},required:!0,"err-msg":t.errCheck.fullName}}),t._v(" "),s("InputPhone",{staticClass:"mt-4",attrs:{label:"Số điện thoại",placeholder:"0961633xxx",value:(""+t.user.countryCode+t.user.phone).replace("+84","0"),"on-change":t.inputPhone,required:!0,"err-msg":t.errCheck.phone}}),t._v(" "),s("InputField",{staticClass:"mt-4",attrs:{type:"email",name:"email",label:"Email",placeholder:"john.doe@gmail.com",value:t.user.email,"on-change":function(e){return t.inputText("email",e)},required:!0,"err-msg":t.errCheck.email}})],1):t._e(),t._v(" "),"others"===t.target?s("div",[s("InputField",{staticClass:"mt-4",attrs:{name:"fullName",label:"Họ và tên",placeholder:"John Doe","on-change":function(e){return t.inputText("fullName",e)},required:!0,"err-msg":t.errCheck.fullName}}),t._v(" "),s("InputPhone",{staticClass:"mt-4",attrs:{label:"Số điện thoại",placeholder:"0961633xxx","on-change":t.inputPhone,required:!0,"err-msg":t.errCheck.phone}}),t._v(" "),s("InputField",{staticClass:"mt-4",attrs:{type:"email",name:"email",label:"Email",placeholder:"john.doe@gmail.com","on-change":function(e){return t.inputText("email",e)},required:!0,"err-msg":t.errCheck.email}})],1):t._e(),t._v(" "),s("InputField",{staticClass:"mt-4",attrs:{name:"address",label:"Địa chỉ",placeholder:"Số nhà, Đường","on-change":function(e){return t.inputText("address",e)},required:!0,"err-msg":t.errCheck.address}}),t._v(" "),s("SelectFiltered",{staticClass:"mt-4",attrs:{label:"Tỉnh / Thành phố",placeholder:"Hồ Chí Minh",items:t.listCities.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"comp-content":t.compSelectionContent(),"on-change":t.onCitySelected,required:!0,"err-msg":t.errCheck.city},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,n=e.select;return[s("li",{staticClass:"hover:text-primary hover:font-semibold cursor-pointer",on:{click:n}},[t._v("\n            "+t._s(i.label)+"\n          ")])]}}])}),t._v(" "),s("SelectFiltered",{staticClass:"mt-4",attrs:{label:"Quận / Huyện",placeholder:"Bình Thạnh","is-selected":t.selectedDistrict,"on-change":t.onDistrictSelected,items:t.listDistricts.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"comp-content":t.compSelectionContent(),required:!0,"err-msg":t.errCheck.district},on:{"update:isSelected":function(e){t.selectedDistrict=e},"update:is-selected":function(e){t.selectedDistrict=e}},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,n=e.select;return[s("li",{staticClass:"hover:text-primary hover:font-semibold cursor-pointer",on:{click:n}},[t._v("\n            "+t._s(i.label)+"\n          ")])]}}])}),t._v(" "),s("SelectFiltered",{staticClass:"mt-4",attrs:{label:"Phường / Xã",placeholder:"Phường 14","is-selected":t.selectedWard,items:t.listWards.map((function(t){return{id:t._id,name:t.code,label:t.title}})),"on-change":function(e){return t.selectedWard=e},"comp-content":t.compSelectionContent()},on:{"update:isSelected":function(e){t.selectedWard=e},"update:is-selected":function(e){t.selectedWard=e}},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item,n=e.select;return[s("li",{staticClass:"hover:text-primary hover:font-semibold cursor-pointer",on:{click:n}},[t._v("\n            "+t._s(i.label)+"\n          ")])]}}])})],1)]),t._v(" "),s("Section",{staticClass:"action-section text-center py-8"},[s("Button",{attrs:{"on-click":function(){return t.$router.go(-1)}}},[t._v("Quay về")]),t._v(" "),s("Button",{staticClass:"ml-1",attrs:{primary:"","on-click":t.submitOrder}},[t._v("Xác nhận")])],1)],1)}),[],!1,null,"6099c68c",null).exports,li={corgi:ys},ci={name:"PNotFound",components:{Container:ie,Section:ne,Button:qe},computed:{imgSrc:()=>li.corgi}},ui=(0,Ft.Z)(ci,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"text-center mt-24"},[s("h2",{staticClass:"text-title-1 text-light md:text-large-2 lg:text-large font-extralight uppercase"},[t._v("\n      404 - Không tìm thấy trang\n    ")])]),t._v(" "),s("Section",{staticClass:"w-1/4 m-auto transform -translate-y-1/3 text-center"},[s("img",{attrs:{src:t.imgSrc}}),t._v(" "),s("Section",[s("router-link",{attrs:{to:{name:"p-home"}}},[s("Button",{attrs:{primary:"",size:"small"}},[t._v("Về trang chủ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,di={name:"POrderSuccess",components:{Container:ie,Section:ne,Button:qe}},hi=(0,Ft.Z)(di,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"text-center text-5xl md:text-6xl lg:text-9xl text-green-500"},[s("FaIcon",{attrs:{icon:"check"}})],1),t._v(" "),s("Section",{staticClass:"text-center"},[s("h2",{staticClass:"text-title-1 md:text-large-2 lg:text-large uppercase text-white"},[t._v("ĐẶT HÀNG THÀNH CÔNG!")])]),t._v(" "),s("Section",{staticClass:"text-center"},[s("div",{staticClass:"text-base text-white"},[t._v("Đơn hàng của bạn đã được nhận và chúng tôi sẽ liên lạc với bạn sớm nhất.")])]),t._v(" "),s("Section",{staticClass:"w-1/4 m-auto text-center"},[s("Section",[s("router-link",{attrs:{to:{name:"p-home"}}},[s("Button",{attrs:{primary:"",size:"small"}},[t._v("Về trang chủ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,pi={name:"PMyOrder",components:{Container:ie,Section:ne,Button:qe,Box:Qt},data:()=>({lstStatus:[{code:"all",value:"Tất cả"},{code:"pending",value:"Chờ xử lý"},{code:"doing",value:"Đang giao"},{code:"done",value:"Đã giao"},{code:"cancel",value:"Hủy yêu cầu"}],currentTab:0,orderLines:[],mapProducts:{}}),computed:{...Ot,...J,...Ze},mounted(){this.accountIsLogged||fi.push({name:"p-otp-request",replace:!0})},created(){this.actListTransactions2().then((async()=>{for(let t=0;t<this.listTransactions.length;t++)Object.keys(this.listTransactions[t].groupProductId).forEach((t=>{this.actGetProductByID(t).then((e=>{this.mapProducts={...this.mapProducts,[t]:e}}))}))}))},methods:{...Nt,...tt,...De}},mi=(0,Ft.Z)(pi,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"order-section"},[s("h3",{staticClass:"text-title-1"},[t._v("Đơn hàng của tôi")]),t._v(" "),s("div",{staticClass:"tabs"},t._l(t.lstStatus,(function(e,i){return s("div",{key:i,class:["tab-item",{active:t.currentTab===i}],on:{click:function(e){t.currentTab=i}}},[t._v("\n        "+t._s(e.value)+"\n      ")])})),0),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"tab-content"},[0===t.currentTab?s("div",[0==t.listTransactions.length?s("div",{staticClass:"font-semibold text-center p-2"},[s("span",[t._v("Không có đơn hàng")])]):t._l(t.listTransactions,(function(e,i){return s("div",{key:i,staticClass:"order"},[s("div",{staticClass:"order-item"},[s("div",{staticClass:"item-image"},[s("Box",{attrs:{shape:"square"}},[t.mapProducts[Object.keys(e.groupProductId).sort()]&&t.mapProducts[Object.keys(e.groupProductId).sort()[0]]&&t.mapProducts[Object.keys(e.groupProductId).sort()[0]].thumbnail?s("img",{attrs:{src:t.mapProducts[Object.keys(e.groupProductId)[0]].thumbnail,alt:"",srcset:""}}):t._e()])],1),t._v(" "),s("div",{staticClass:"item-details"},[s("div",{staticClass:"flex flex-row justify-between"},[s("span",{staticClass:"font-semibold"},[t._v("\n                    "+t._s(t.mapProducts[Object.keys(e.groupProductId).sort()[0]]&&t.mapProducts[Object.keys(e.groupProductId).sort()[0]].title||""))])]),t._v(" "),s("span",{staticClass:"qty"},[t._v("x\n                  "+t._s(e.groupProductId[Object.keys(e.groupProductId).sort()[0]]&&e.groupProductId[Object.keys(e.groupProductId).sort()[0]].length))])])]),t._v(" "),s("div",{staticClass:"total-price"},[s("span",[t._v(t._s(Object.keys(e.groupProductId).length)+" sản phẩm")]),t._v(" "),s("span",[t._v("Thành tiền: "+t._s(t.$n(e.total,"currency")))])]),t._v(" "),s("div",{staticClass:"status"},[s("FaIcon",{attrs:{icon:"motorcycle"}}),t._v(" "),s("span",{staticClass:"pl-1"},[t._v("Giao hàng thành công")])],1),t._v(" "),s("div",{staticClass:"text-right p-2"},[s("Button",{attrs:{"on-click":function(){}}},[t._v("Xem chi tiết")])],1)])}))],2):t._e(),t._v(" "),1===t.currentTab?s("div",[t._v("\n          List of 1 options\n        ")]):t._e(),t._v(" "),2===t.currentTab?s("div",[t._v("\n          List of 2 options\n        ")]):t._e(),t._v(" "),3===t.currentTab?s("div",[t._v("\n          List of 3 options\n        ")]):t._e(),t._v(" "),4===t.currentTab?s("div",[t._v("\n          List of 4 options\n        ")]):t._e()])])]),t._v(" "),s("Section",{staticClass:"text-center"},[s("router-link",{attrs:{to:{name:"p-home"}}},[s("Button",{attrs:{primary:"",size:"small"}},[t._v("Về trang chủ")])],1)],1)],1)}),[],!1,null,"66146dd6",null).exports,gi={components:{Section:ne,Container:ie,InputField:ze,InputPhone:ws,Button:qe,RadioGroup:Ke},data:()=>({fullName:"",countryCode:"+84",phone:"",email:"",address:"",birthday:null,gender:null,errCheck:{fullName:null,countryCode:null,phone:null,email:null}}),computed:{...J,...zs},mounted(){this.accountIsLogged?this.actListCities():fi.push({name:"p-otp-request",replace:!0})},methods:{...tt,...Us,validateForm(){let t=!0;return this.fullName||(this.errCheck.fullName=this.$t("err.fullNameMissing"),t=!1),this.countryCode||(this.errCheck.countryCode=this.$t("err.countryCodeMissing"),t=!1),this.phone||(this.errCheck.phone=this.$t("err.phoneMissing"),t=!1),this.email?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.email).toLowerCase())||(this.errCheck.email=this.$t("err.emailInvalid"),t=!1):(this.errCheck.email=this.$t("err.emailMissing"),t=!1),t},inputText(t,e){console.log(t,e),this[t]=e,this.errCheck[t]=null},inputPhone(t){this.errCheck.phone=null,this.countryCode=t.code,this.phone=t.number},compSelectionContent:()=>es,submitProfile(){console.log("here");let t={fullName:this.fullName,countryCode:this.countryCode,phone:this.phone,email:this.email,gender:this.gender,birthday:`${this.birthday}T00:00:00.000Z`};this.validateForm()&&this.doUpdateProfile(t).then((()=>{this.$toast({type:"success",id:"update-profile",message:"Cập nhật thông tin thành công"})}))}}},vi=(0,Ft.Z)(gi,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Container",[s("Section",{staticClass:"address-section"},[s("span",{staticClass:"text-title-2"},[t._v("Hồ sơ khách hàng")]),t._v(" "),s("div",{staticClass:"mt-4"},[s("InputField",{staticClass:"mt-4",attrs:{name:"fullName",label:"Họ và tên",placeholder:"Trần Thanh Danh",value:t.user.fullName,"on-change":function(e){return t.inputText("fullName",e)},"err-msg":t.errCheck.fullName}}),t._v(" "),s("div",{staticClass:"mt-4"},[t._v("Giới tính")]),t._v(" "),s("RadioGroup",{attrs:{"on-change":function(e){t.gender=e.value,t.user.gender=t.gender},name:"gender",items:[{label:"Nam",value:"male",checked:"male"===t.user.gender},{label:"Nữ",value:"female",checked:"female"===t.user.gender}]}}),t._v(" "),s("InputField",{staticClass:"mt-4",attrs:{name:"birthday",label:"Ngày sinh nhật",type:"date",placeholder:"Trần Thanh\n      Danh",value:t.user.birthday?t.user.birthday.split("T")[0]:null,"on-change":function(e){return t.inputText("birthday",e)}}}),t._v(" "),s("InputPhone",{staticClass:"mt-4",attrs:{label:"Số điện thoại",placeholder:"0961633xxx",value:(""+t.user.countryCode+t.user.phone).replace("+84","0"),"on-change":t.inputPhone,"err-msg":t.errCheck.phone}}),t._v(" "),s("InputField",{staticClass:"mt-4",attrs:{type:"email",name:"email",label:"Email",placeholder:"hop.thu.cua.toi@gmail.com",value:t.user.email,"on-change":function(e){return t.inputText("email",e)},"err-msg":t.errCheck.email}})],1)]),t._v(" "),s("Section",{staticClass:"action-section text-center py-8"},[s("Button",{attrs:{"on-click":function(){return t.$router.go(-1)}}},[t._v("Quay về")]),t._v(" "),s("Button",{staticClass:"ml-1",attrs:{primary:"","on-click":t.submitProfile}},[t._v("Cập nhật")])],1)],1)}),[],!1,null,"81795212",null).exports;i.Z.use(d.Z);const fi=new d.Z({mode:"history",routes:[{path:"/",name:"p-home",component:le},{path:"/brand/:brandSlug",name:"p-dishes-collection",component:Ss,props:!0},{path:"/components",name:"p-components",component:ai},{path:"/checkout",name:"p-checkout",component:oi},{path:"/account",component:At,children:[{path:"profile",name:"p-profile",component:vi},{path:"otp-request",name:"p-otp-request",component:$s},{path:"otp-verify",name:"p-otp-verify",component:Ds},{path:"register",name:"p-register",component:qs},{path:"deep-login",name:"p-deep-login"}]},{path:"/my-order",name:"p-my-order",component:mi},{path:"/success",name:"p-success",component:hi},{path:"/:catchAll(.*)",component:ui,name:"p-not-found"}],scrollBehavior(t,e){const s="p-dishes-collection"===t.name&&e.name===t.name,i=Object.keys(e.query).length;return s&&i?{selector:"#dishes",offset:{x:0,y:120}}:{x:0,y:0}}});i.Z.use(h.ZP);const Ci=new h.ZP.Store({modules:{app:T,account:Q,brands:Ut,categories:ve,products:Ee,cart:Dt,configs:Hs}});E.withStore(Ci);var _i=s(7152);i.Z.use(_i.Z);const yi=new _i.Z({locale:"vi",messages:{vi:{message:{hello:"xin chào",companyFullname:"Công ty TNHH Thương mại và dịch vụ Cuộc Sống Của Tôi",address:"179 Lý Chính Thắng, Phường Võ Thị Sáu, Quận 3, TP. HCM",hotline:"1900.066.890",emailContact:"Email: customercare@mylifecompany.com.vn"},err:{fullNameMissing:"Vui lòng nhập họ tên",countryCodeMissing:"Mã quốc gia không được trống",phoneMissing:"Vui lòng nhập số điện thoại",phoneInvalid:"Số điện thoại không hợp lệ",emailMissing:"Vui lòng nhập email",emailInvalid:"Email không hợp lệ",passwordMissing:"Vui lòng nhập mật khẩu",confirmPasswordNotEqual:"Xác nhận mật khẩu không khớp",addressMissing:"Vui lòng nhập địa chỉ",cityMissing:"Vui lòng nhập chọn tỉnh/thành phố",districtMissing:"Vui lòng nhập chọn quận/huyện",NOT_FOUND:"Không tìm thấy thông tin",VOUCHER_NOT_FOUND:"Không tìm thấy mã giảm giá"}},en:{message:{hello:"hello world"}},jp:{message:{hello:"こんにちは、世界"}}},numberFormats:{vi:{currency:{style:"currency",currency:"VND"}},"en-US":{currency:{style:"currency",currency:"USD"}},"ja-JP":{currency:{style:"currency",currency:"JPY",currencyDisplay:"symbol"}}}}),bi={components:{Popup:ds},computed:{...ce}},ki=(0,Ft.Z)(bi,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Popup",{staticClass:"loading",attrs:{active:t.appIsLoading,"icon-close":!1}},[s("div",{staticClass:"lds-ripple"},[s("div"),t._v(" "),s("div")])])}),[],!1,null,"336ff732",null).exports,xi={computed:{...ce},watch:{errors(t){Object.keys(t).forEach((e=>{this.$toast({type:"error",id:e,message:this.$t(`err.${t[e]}`)})}))}},methods:{...ue,dismissError(t){this.setDismissError(t)}}},Si=(0,Ft.Z)(xi,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Toast",{staticClass:"toast",attrs:{"on-close":t.dismissError},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.type,n=e.message,a=e.close;return[s("div",{staticClass:"toast-message",attrs:{"data-type":i},on:{click:a}},[t._v("\n    "+t._s(n)+"\n  ")])]}}])})}),[],!1,null,"35d49cac",null).exports,Ii={props:{onClick:{type:Function,default:()=>()=>{}},light:{type:Boolean,default:!1}}},Pi=(0,Ft.Z)(Ii,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{staticClass:"logo",attrs:{src:t.light?"/public/images/mylife-company-logo-white.png":"/public/images/mylife-company-logo-black.png",alt:"mylife-company-logo"},on:{click:t.onClick}})}),[],!1,null,"77df50e0",null).exports,Ti={components:{Container:ie,Section:ne,Logo:Pi,IconClickable:is,Button:qe,Dropdown:Ks,List:es,Sidebar:Cs,Box:Qt},data:()=>({isOpen:!1}),computed:{displayFullname(){if(this.user&&this.user.fullName){const t=this.user.fullName.split(" ");return t.length>2?t.splice(t.length-2).join(" "):this.user.fullName}return""},...J,...Wt},methods:{...tt,handleLoginButton(){let t=this.$route.query;const e=this.$router.currentRoute.path;e&&(t={backUrl:e,...this.$route.query}),fi.push({name:"p-otp-request",query:t}).then().catch()},handleIconClick(){this.isOpen=!this.isOpen},gotoBrand(t){if(this.isOpen=!1,"market"===t.type)return window.open(t.link,"_blank");fi.push({name:"p-dishes-collection",params:{brandSlug:t.slug}}).catch((()=>{}))},gotoProfile(){this.isOpen=!1,fi.push({name:"p-profile"}).catch((()=>{}))},logout(){this.doLogout().then((()=>{this.doPublicLogin().then((()=>{window.location.reload()}))}))}}},wi=(0,Ft.Z)(Ti,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"text-xs font-semibold text-center bg-brand-accent p-2 text-light"},[t._v("\n    Xin lưu ý: Quý khách hàng vui lòng đặt các món trong cùng một nhà hàng cho một lần đặt hàng. Chúng tôi rất tiếc\n    không thể phục vụ nhiều món ở nhiều nhà hàng khác nhau trong cùng một lần đặt hàng. Xin cảm ơn!\n  ")]),t._v(" "),s("Container",[s("Section",{staticClass:"flex flex-row  justify-between items-center"},[s("div",{staticClass:"flex flex-row flex-nowrap items-center mr-4"},[s("router-link",{attrs:{to:{name:"p-home"}}},[s("Logo",{staticClass:"cursor-pointer mr-4 sm:mr-8",attrs:{light:""}})],1)],1),t._v(" "),s("div",{staticClass:"flex flex-row"},t._l(t.listMarket.concat(t.listGroup1,t.listGroup2),(function(e,i){return s("div",{key:i,staticClass:"md:w-16 lg:w-24 p-4 hidden md:block",on:{click:function(){return t.gotoBrand(e)}}},[s("Box",{attrs:{shape:"square"}},[s("img",{attrs:{src:e.negativeImage,alt:""}})])],1)})),0),t._v(" "),s("div",{staticClass:"flex flex-row items-center"},[s("IconClickable",{staticClass:"block md:hidden text-xl text-light mr-4",attrs:{icon:"bars","on-click":t.handleIconClick}}),t._v(" "),t.accountIsLogged?s("div",{staticClass:"flex flex-row items-center"},[s("Dropdown",{attrs:{position:"left"}},[s("div",{staticClass:"text-light mt-1",attrs:{slot:"trigger"},slot:"trigger"},[s("div",[s("span",{staticClass:"user-fullname float-left"},[t._v(t._s(t.displayFullname))]),t._v(" "),s("FaIcon",{staticClass:"user-icon float-right ml-4",attrs:{icon:"user"}})],1)]),t._v(" "),s("List",{staticClass:"w-max shadow-strong border p-1 rounded bg-neutral-40",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"cursor-pointer text-light p-1",on:{click:t.gotoProfile}},[t._v("Hồ sơ")]),t._v(" "),s("div",{staticClass:"cursor-pointer text-light p-1",on:{click:t.logout}},[t._v("Đăng xuất")])])],1)],1):t._e(),t._v(" "),t.accountIsLogged?t._e():s("div",[s("Button",{attrs:{primary:"",size:"small","on-click":t.handleLoginButton}},[t._v("Đăng nhập")])],1),t._v(" "),s("Sidebar",{attrs:{"is-open":t.isOpen},on:{"update:isOpen":function(e){t.isOpen=e},"update:is-open":function(e){t.isOpen=e}},scopedSlots:t._u([{key:"title",fn:function(){return[s("span",{staticClass:"pr-1 cursor-default font-medium"},[t._v("Đến trang đặt món")]),t._v(" "),s("FaIcon",{attrs:{icon:"chevron-right"}})]},proxy:!0},{key:"default",fn:function(){return[s("div",{staticClass:"menu-mobile-link mt-4"},[s("div",{staticClass:"font-semibold"},[t._v("Chọn thương hiệu")]),t._v(" "),s("ul",[s("li",t._l(t.listMarket.concat(t.listGroup1,t.listGroup2),(function(e,i){return s("a",{key:i,on:{click:function(){return t.gotoBrand(e)}}},[t._v("\n                    "+t._s(e.title)+"\n                  ")])})),0)])])]},proxy:!0}])})],1)])],1)],1)}),[],!1,null,"3db87868",null).exports,Li={PlayStore:s.p+"assets/images/playstore.59a0b4.png",AppStore:s.p+"assets/images/appstore.4170ba.png"},$i={components:{Container:ie,Section:ne,Logo:Pi,List:es},computed:{android:()=>Li.PlayStore,iOS:()=>Li.AppStore,apiHost:()=>"https://mylife-deli-api.phattiencorp.vn"}},Ei={components:{LHeader:wi,LFooter:(0,Ft.Z)($i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("Container",[s("Section",{staticClass:"md:flex justify-items-center justify-between"},[s("div",{staticClass:"w-full md:w-1/2"},[s("Logo",{staticClass:"w-24",attrs:{light:""}}),t._v(" "),s("Section",{staticClass:"mb-0"},[s("span",{staticClass:"uppercase font-bold"},[t._v("\n            "+t._s(t.$t("message.companyFullname"))+"\n          ")]),t._v(" "),s("div",{},[s("List",{staticClass:"mt-4 text-body-2"},[s("li",[s("span",{staticClass:"icon"},[s("FaIcon",{attrs:{icon:"map"}})],1),t._v(t._s(t.$t("message.address"))+"\n              ")]),t._v(" "),s("li",[s("span",{staticClass:"icon"},[s("FaIcon",{attrs:{icon:"mobile"}})],1),t._v(t._s(t.$t("message.hotline"))+"\n              ")]),t._v(" "),s("li",[s("span",{staticClass:"icon"},[s("FaIcon",{attrs:{icon:"envelope"}})],1),t._v(t._s(t.$t("message.emailContact"))+"\n              ")])])],1)])],1),t._v(" "),s("div",{staticClass:"mt-4 md:mt-0 flex flex-col items-start md:items-end"},[s("div",{staticClass:"mt-4 flex flex-row max-w-screen-xs"},[s("div",{staticClass:"mr-4"},[s("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.mylife_app",target:"_blank"}},[s("img",{attrs:{src:t.android}})]),t._v(" "),s("img",{staticClass:"mt-2",attrs:{src:"https://s3.phattiencorp.vn:7481/mylife/upload/delivery/2021/06/24/qrCode_google_1624533846453.png",alt:"qrCode_google"}})]),t._v(" "),s("div",[s("a",{attrs:{href:"https://apps.apple.com/vn/app/mylife/id1454193800",target:"_blank"}},[s("img",{attrs:{src:t.iOS}})]),t._v(" "),s("img",{staticClass:"mt-2",attrs:{src:"https://s3.phattiencorp.vn:7481/mylife/upload/delivery/2021/06/24/qrCode_apple_1624533846448.png",alt:"qrCode_apple"}})])])])])],1)],1)}),[],!1,null,"52c6f4e9",null).exports,Loading:ki,Toast:Si}},Zi={name:"App",components:{LMain:(0,Ft.Z)(Ei,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout-main"},[s("Loading"),t._v(" "),s("LHeader"),t._v(" "),s("div",{staticClass:"flex-grow"},[s("router-view")],1),t._v(" "),s("LFooter"),t._v(" "),s("Toast")],1)}),[],!1,null,"137e7c86",null).exports},computed:{...J,...Ot},created(){this.loadInfo().then((()=>{this.actListBrand(),this.actListPrices(),this.actInitCart().then((()=>{let t=[...new Set(this.cart.lines.map((t=>t.productId)))];Promise.all(t.map((t=>this.actGetProductByID(t)))).then((()=>{this.actNormalizeCart()}))}))}))},methods:{...tt,...Xt,...De,...Nt}},Di=(0,Ft.Z)(Zi,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("LMain"),t._v(" "),s("a",{staticClass:"float bg-primary",attrs:{href:"tel:1900066890"}},[s("FaIcon",{staticClass:"my-float",attrs:{icon:"phone-alt"}})],1)],1)}),[],!1,null,"4966f80a",null).exports;n.vI.add(a.BC0,a.ILF,a.xiG,a.LEp,a.Wx7,a.j1w,a.Z__,a.FU$,a.eW2,a.Ozj,a._Ob,a.Xcf,a.r8p,a.KtF,a.uMC,a.nYk,a.sq$,a.I7k,a.gc2,a.onQ,a._tD,a.A35,a.NBC,a.XCy,a.BUU,a.wc0,a.Zrf,a.DOT,a.sth,a.YHc),i.Z.component("FaIcon",r.GN),i.Z.use(u),new i.Z({el:"#app",router:fi,store:Ci,i18n:yi,render:t=>t(Di)}),i.Z.config.productionTip=!1},4991:()=>{}},t=>{"use strict";var e=e=>t(t.s=e);t.O(0,[216],(()=>(e(4991),e(4671)))),t.O()}]);
//# sourceMappingURL=http://localhost:8080/sourcemaps/main.dc7d0c.bundle.js.map